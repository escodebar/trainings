<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

    <title>Git workshop</title>
    <link rel="stylesheet" href="./css/reveal.css" />
    <link rel="stylesheet" href="./css/theme/league.css" id="theme" />
    <link rel="stylesheet" href="./css/highlight/zenburn.css" />
    <link rel="stylesheet" href="./css/print/paper.css" type="text/css" media="print" />

  </head>
  <body>
    <div class="reveal">
      <div class="slides"><section  data-markdown><script type="text/template">

## Learning Git
# the hard way

<aside class="notes"><ul>
<li>Most of the things we discuss here are not only achievable with Git, but can be made with other VCS as well</li>
<li>I am a total Git-Fanboy, whatever I say during this workshop is totally opinionated</li>
<li>I want to make this a fun experience for all of us!</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
## A few words about
# this training

<aside class="notes"><ul>
<li>It all started when I was asked to give a full day introduction to Git for a CAS</li>
<li>I prepared a training trying to add something useful for several levels of Git knowledge</li>
<li>The intended audience was PhD students with basic to no Git experience and technicians</li>
<li>I learned a lot while preparing the training</li>
<li>The training was very successful, receiving a lot of good feedback</li>
<li>It is going to be tough (for all of us) but rewarding</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
## Schedule

* The Good, the Bad and the Ugly
* Gitception: Reaching into the substructure
* Of trees, branches and pieces of fruit
* It's a backup system... It's a patch system... It's Git!
* Gitbreak: Try to keep the holistic view
* Workfellas: Five ways to contribute to the code base

<aside class="notes"><p>There are going to be excercises after or during each block!</p>
<ul>
<li>The Good, the Bad and the Ugly<ul>
<li>discusses the strengths, weaknesses, opportunities and threads of using Git</li>
<li>This discussion should lead to determining how you want to use Git and how you can get there</li>
</ul>
</li>
<li>Gitception<ul>
<li>is about using Git to understand Git and understanding the structure of Git</li>
<li>The concept of Gitception is used throughtout the training</li>
<li>Knowing Git as a tool removes the constraints for the applied methods</li>
</ul>
</li>
<li>Of trees, branches and pieces of fruit<ul>
<li>Git&#39;s branching mechanism</li>
<li>combining changes implemented in seperate branches into one branch</li>
</ul>
</li>
<li>It&#39;s a backup system... It&#39;s a patch system... It&#39;s Git!<ul>
<li>how to create patches using Git</li>
<li>cleaning up the Git history before a feature is released</li>
<li>These concepts are helpful for bringing your contributions to the complicated or clear domain</li>
</ul>
</li>
<li>Gitbreak<ul>
<li>Introduction into distributed Git</li>
<li>Working with remotes</li>
</ul>
</li>
<li>Workfellas<ul>
<li>Introduction to possible workflows with Git</li>
</ul>
</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
## Requirements

If you know how to type commands in a terminal and parse its output, this training is made for you!

<aside class="notes"><ul>
<li>Reading is crucial here, by the end of the training you&#39;ll be using the <em>man</em>-pages a lot!</li>
<li>No specific Git editor integration is discussed, since none of them covers all of Git&#39;s features (and none of them does it in the same way)</li>
<li>For the same reason, no Git GUI is discussed</li>
<li>I recommend using the terminal all of the time and start using other tools, if they make you more efficient than when using the console (there are many situations in which other tools are more efficient)</li>
<li>In many occasions you&#39;ll find yourself connected to a server with a Git repository doing analysis, knowing the commands in that situation is crucial</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
## Slides

[https://escodebar.github.io/trainings/git/mf/](https://escodebar.github.io/trainings/git/mf/)

<aside class="notes"><ul>
<li>You can find the speaker notes in the slides, which allows you to go through the training at home</li>
<li>Pass the slides to your coworkers, your friends, etc., the more people understand Git the better</li>
<li>If a slide needs clarification, please let me know!</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
# Are you ready?
</script></section><section  data-markdown><script type="text/template">
![Cynefin](https://cognitive-edge.com/wp-content/uploads/2020/03/Screenshot-2020-03-01-at-07.35.png)<!-- .element: height="500px" -->

<aside class="notes"><ul>
<li>Cynefin is an invention by <a href="https://twitter.com/snowded">Dave Snowden</a></li>
<li>It defines 5 domains:<ul>
<li>Disorder</li>
<li>Chaos</li>
<li>Complex</li>
<li>Complicated</li>
<li>Clear</li>
</ul>
</li>
<li>The domain we are in depends on our experience and the subject we are dealing with</li>
<li>Practices lead to different results depending on the domain you are in</li>
<li>...adapt therefore your methods and tools depending on the domain you are in</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
![The Good](https://upload.wikimedia.org/wikipedia/it/5/50/Il_biondo.png)<!-- .element: height="500px" -->
</script></section><section  data-markdown><script type="text/template">
## Git

"... is oddly liberal with how and when you use it."

* is a powerful analysis tool
* allows running automated tasks
* allows many collaboration workflows
* allows patch management

<aside class="notes"><ul>
<li>Git does not force you to suit certain workflows, it doesn&#39;t get in your way</li>
<li>This liberty requires understanding Git</li>
<li>This liberty also allows to evolve your development workflow</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
![The Ugly](https://upload.wikimedia.org/wikipedia/it/e/e7/Il_brutto.png)<!-- .element: height="500px" -->
</script></section><section  data-markdown><script type="text/template">
## Git

... is utterly complex

* has crazy command line syntax
* has a leaky abstraction
* requires many different concepts
* requires a holistic picture

<aside class="notes"><ul>
<li>no distinction between implementation detail and user interface</li>
<li>beginners are confronted with internal details</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
![The Bad](https://upload.wikimedia.org/wikipedia/it/6/68/Il_cattivo.png)<!-- .element: height="500px" -->
</script></section><section  data-markdown><script type="text/template">
## Git

... is really hard to learn

* has a complex information model
* comes with complex workflows
* has crappy documentation

<aside class="notes"><ul>
<li>Git has a very steep learning curve</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
...but once you're there
</script></section><section  data-markdown><script type="text/template">
# Git

##  will make you

# a better

# programmer

<aside class="notes"><ul>
<li>But only if you&#39;re willing to change!</li>
<li>Improvement always comes with change!</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
## Exercises

* Have you been using other version control systems?
* How long have been using Git?
* What challenges you the most when using Git?
* How long have been programming?
* What kind of software do you work on?
* What kind of tasks do you solve?
* What challenges you the most when writing software?
</script></section><section  data-markdown><script type="text/template">
# Discussion

<aside class="notes"><ul>
<li>Primary vs. secondary needs</li>
<li>Handling complexity</li>
<li>Values &gt; Principles &gt; Methods &gt; Tools &amp; Activities</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
![Git](https://imgs.xkcd.com/comics/git_2x.png)<!-- .element: height="500px" -->

<aside class="notes"><ul>
<li>The goal of this block is to show what Git does when it is used, to allow you to choose how to use it</li>
<li>This training covers theory for using Git, however brain muscle (training) is needed</li>
<li>If you want more training and need help, do not hesitate to contact me</li>
<li>Use and learn <em>all</em> the commands and ask yourself how they may help you improving your workflow in a given situation</li>
<li>This block gives you the means to learn using Git when there is no <em>happy path</em></li>
<li>Some parts of this block are rather technical and go &quot;deep&quot; into Git&#39;s internals</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
## Configuring your Git

...to identify your actions
```shell
$ git config --global user.name "Pablo Escodebar"

$ git config --global user.email "escodebar@gmail.com"

```

<aside class="notes"><ul>
<li>Whenever you do something in Git, your user will be used to track your actions</li>
<li>There are three levels of configuration:<ul>
<li>The repository configuration</li>
<li>Your user configuration (using <code>--global</code>)</li>
<li>The system configuration (using <code>--system</code>)</li>
</ul>
</li>
<li>You can also configure the editor, the default editor is <code>vim</code></li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
## Setup

Create a repository:

```shell
$ mkdir -p ~/working/directory/ && cd $_ && git init .
Initialized empty Git repository in ~/working/directory/.git/
```

```shell
$ ls -blah
total 0
drwxr-xr-x 3 pablo.verges dectris  60 Mar 16 21:26 .
drwx------ 3 pablo.verges dectris  60 Mar 16 21:26 ..
drwxr-xr-x 7 pablo.verges dectris 200 Mar 16 21:26 .git
```

See that `.git` folder there? That's the repository.

<aside class="notes"><ul>
<li>During this training a toy repository is used</li>
<li>We will be adding changes to the repository during the training to confront you with typical Git situations</li>
<li>Everything tracked by Git is inside the repository. Everything! Seriously... everything! Or almost everything!</li>
<li>If there is something you want to backup, then it&#39;s the <code>.git</code> folder... but&#39;s let&#39;s discuss that later</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
## Digging deeper

Don't panic!

```shell
$ ls -blah .git
total 12K
drwxr-xr-x 7 pablo.verges dectris 200 Mar 16 21:26 .
drwxr-xr-x 3 pablo.verges dectris  60 Mar 16 21:26 ..
drwxr-xr-x 2 pablo.verges dectris  40 Mar 16 21:26 branches
-rw-r--r-- 1 pablo.verges dectris  92 Mar 16 21:26 config
-rw-r--r-- 1 pablo.verges dectris  73 Mar 16 21:26 description
-rw-r--r-- 1 pablo.verges dectris  23 Mar 16 21:26 HEAD
drwxr-xr-x 2 pablo.verges dectris 280 Mar 16 21:26 hooks
drwxr-xr-x 2 pablo.verges dectris  60 Mar 16 21:26 info
drwxr-xr-x 4 pablo.verges dectris  80 Mar 16 21:26 objects
drwxr-xr-x 4 pablo.verges dectris  80 Mar 16 21:26 refs
```

This is deep enough for now!

<aside class="notes"><ul>
<li>Become aware of the list entries</li>
<li>HEAD, config, description are files</li>
<li>The rest are folders</li>
<li>Studying what happens in here while using Git was very helpful to me</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
## Gitception

Behold, run this in a separate terminal!
<!-- .element: class="fragment" -->

```shell
$ cd ~/working/directory/.git
```
<!-- .element: class="fragment" -->

We are creating a repository inside the repository
<!-- .element: class="fragment" -->
```shell
$ git init . && git add -A && git commit -m "Add the repository"
[master (root-commit) 9611113] Add the repository
 15 files changed, 653 insertions(+)
 create mode 100644 HEAD
 create mode 100644 config
 create mode 100644 description
 create mode 100755 hooks/applypatch-msg.sample
 [...]
 create mode 100755 hooks/update.sample
 create mode 100644 info/exclude
```
<!-- .element: class="fragment" style="font-size: 0.535em" -->

Don't do this at home!
<!-- .element: class="fragment" -->

<aside class="notes"><ul>
<li>Open a second terminal window and navigate to the repository&#39;s repository to switch context easier</li>
<li>Git keeps track of all the changes, it is therefore a perfect analysis tool</li>
<li>Most Git commands go up the directory path to the point where they find a <code>.git</code> folder, but &quot;ignore&quot; its contents</li>
<li>Therefore we can create a repository in the repository to track the changes and understand Git&#39;s behavior</li>
<li>If you do not remember what happens when you run a specific command, you can look it up later in the &quot;Gitception&quot; repository</li>
<li>Ignore the added files for now, most of them are discussed later during the training</li>
<li>I haven&#39;t seen an other Git training doing this! Let me know if you like this idea!</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
![Gitception](https://i.imgflip.com/2f33xj.jpg)

<aside class="notes"><ul>
<li>Xzibit shows up on every slide which uses the repository in the repository to set you in the right context</li>
<li>You do not need to run the commands of these slides, since they&#39;re only for comprehension</li>
<li>The repository is publicly available, you can clone it and take a look at its history</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
## What's the status?

To get an overview of the repository run:
```shell
$ git status
On branch master

No commits yet

nothing to commit (create/copy files and use "git add" to track)
```

<aside class="notes"><ul>
<li>The repository is on the master branch</li>
<li>Branches are discussed later, for now, just remember that the master branch is (in most repositories) the default branch</li>
<li>There are no commits</li>
<li>Commits are discussed in detail in a few slides</li>
<li>In many cases Git tells you what to do, you may configure these advices with the Git config command</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
## Let's do something!

Documentation first!

```shell
$ echo "# My awwwesome training" > README.md
```

What's the status now?
```shell
$ git status
On branch master

No commits yet

Untracked files:
  (use "git add <file>..." to include in what will be committed)
	README.md

nothing added to commit but untracked files present (use "git add" to track)
```
<!-- .element: style="font-size: 0.465em;" -->

<aside class="notes"><ul>
<li>We want to track changes to the current untracked file!</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
## The index

aka. *the staging area*

![The index](http://web.archive.org/web/20090210020404id_/http://whygitisbetterthanx.com/images/index1.png) <!-- .element: height="250px" style="background: white" -->

"*...is an intermediate area which allows to setup the change before making the commit.*"

<aside class="notes"><ul>
<li>Not all VCS have this feature!</li>
<li>I like comparing the staging area to a fork:
The plate is the working directory, the repository is your tummy... and the fork allows you to:<ul>
<li>...pick up what you want to put in your tummy</li>
<li>...take a look what you are going to eat before doing so</li>
</ul>
</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
## Let's stage!

Put files in the staging area:
```shell
$ git add README.md && git status
On branch master

No commits yet

Changes to be committed:
  (use "git rm --cached <file>..." to unstage)
	new file:   README.md
```

<aside class="notes"><ul>
<li>The file is now in the <code>changes to be committed</code></li>
<li>You can add whole directories (double check that there are no files which should not be included)</li>
<li>You can also add parts of files (we will see the patch mode later), unless they&#39;re not tracked yet</li>
<li>The Git integration of your editor may allow to stage a selection of lines (similar to the patch mode)</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
## What happened in the repository?

```shell
$ git add . && git commit -m "Add files to index"
[master 83ea366] Add files to index
 2 files changed, 0 insertions(+), 0 deletions(-)
 create mode 100644 index
 create mode 100644 objects/b2/7501ade65f39bc91a5e6eb0d707903ba225a00
```
<!-- .element: style="font-size: 0.51em;" -->

<!-- .slide: data-background="./gitception-flipped.jpg" -->

<aside class="notes"><ul>
<li>The index file is a binary file and it is not discussed in this training</li>
<li>The name of the objects is given by their (SHA1) hash (altough moving to another hashing algorithm is being discussed)</li>
<li>To improve file-system usage, the objects are stored in folders</li>
<li>You can add any kind of content into a Git repository, yet some objects shouldn&#39;t be added (large files which change a lot)</li>
<li>Git will store this content in an object.</li>
<li>Git objects are seen as part of the Git internals!</li>
<li>Understanding objects is relevant for using and debugging Git well</li>
</ul>
<p>Questions:</p>
<ul>
<li>How many folders will be created at max? [16^2]</li>
<li>How many files can be created? [16^32]</li>
<li>What&#39;s the probability to have two files with the same hash?</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
## What's in the newly created object?

Inspect the created object
```shell
$ git cat-file -t b27501a
blob
```
```shell
$ git cat-file -p b27501a
# My awwwesome training
```

<aside class="notes"><ul>
<li>Git categorizes commands into porcelain and plumbing commands</li>
<li>This command is considered a plumbing command</li>
<li>You can also use <code>git show</code>, the output will differ tough</li>
<li>Files are stored as objects of type &quot;blob&quot; (Binary Large OBject)</li>
<li>Not only files are stored in objects</li>
<li>You can find the size of an object by using the <code>-s</code> flag</li>
<li>Only the first few (min. 7) hexadecimal digits of a hash are required to determine the file</li>
<li>More objects are discussed later</li>
<li>Please remember, that the whole file and not only the diff is stored! (well... it depends! 😊)</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
## See staged changes

...to check if they are ready to be committed:
```shell
$ git diff --cached
diff --git a/README.md b/README.md
new file mode 100644
index 0000000..b27501a
--- /dev/null
+++ b/README.md
@@ -0,0 +1 @@
+# My awwwesome training
```

Are you ready to commit them?

<aside class="notes"><ul>
<li>Take a look at the changes to be committed before doing so</li>
<li>Make sure you know, what you commit</li>
<li>Think of the fork metaphore... do you want to eat a bad pea? or a bug hidden between them?</li>
<li>Make commits as small as possible for easier reviewing, the easier the review, the less errors will slip through</li>
<li>If keeping track of what it&#39;s being committed is hard, then you might want to rethink your workflow</li>
<li>Think of slicing down you work!</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
## A commit

aka. *a change*

"*...represents a complete version of your code.*"

<aside class="notes"><ul>
<li>Complete means: Tested, documented and ready to ship (well... this depends!)</li>
<li>A commit comes with a commit message</li>
<li>Guidelines for commit messages exist (...but most ignore them)</li>
<li>Read <a href="https://chris.beams.io/posts/git-commit/">How to write a Git Commit Message</a>:<ul>
<li>Expressive but short title and in imperative mode</li>
<li>One empty line after the commit title</li>
<li>Describe WHAT and WHY you are doing the change (HOW is described in the code)</li>
</ul>
</li>
<li>If you need to describe the how, you should probably rethink your code</li>
<li>If a commit is not complete, you might want to stash the changes instead (discussed later today)</li>
<li>If you have a test driven workflow, you may commit the test first and then the rest, but then mark, the test as expected to fail or not implemented (and fixup the implementation in a further commit - also discussed later)</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
## Save the changes

...by commiting them to the repository
```shell
$ git commit -m "Describe the training"
[master (root-commit) 186ea78] Describe the training
 1 file changed, 1 insertion(+)
 create mode 100644 README.md
```

<aside class="notes"><ul>
<li><code>master</code> is the default branch name by default (the name of the default branch is configurable)</li>
<li><code>root-commit</code>: This is a special one, it has no parent, well see that in a minute</li>
<li><code>186ea78</code> is part of the hash of the commit</li>
<li>Git tells you the the number of files changed, lines inserted or deleted</li>
<li>Create mode with permissions (not all permissions are stored in Git)</li>
<li>You can also run just <code>git commit</code> without the <code>-m</code> argument, then your editor will pop-up</li>
<li>I did not describe the &quot;why&quot; here, do as I tell you, not as I do (here)</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
## Time to dig deeper

The repository's content must have changed...

```shell
$ git add . && git commit -m "Commit file"
[master 72459c8] Commit file
 7 files changed, 7 insertions(+)
 create mode 100644 COMMIT_EDITMSG
 create mode 100644 logs/HEAD
 create mode 100644 logs/refs/heads/master
 create mode 100644 objects/18/6ea78d81cffde456853bc6e2a72ae39444360d
 create mode 100644 objects/a4/4f211c376b94d122c6429ef8e87ffa7856419d
 create mode 100644 refs/heads/master
```
<!-- .element: style="font-size: 0.51em;" -->

<!-- .slide: data-background="./gitception.jpg" -->

<aside class="notes"><ul>
<li>The <code>COMMIT_EDITMSG</code> is used to temporarily store the message of the commit</li>
<li>The logs keep track of the commit hashes the references pointed to, they become handy when branches are lost (more about this later)</li>
<li>There is also a log for the <code>HEAD</code> (more about the <code>HEAD</code> later)</li>
<li>References (or refs here) are discussed later - see the <code>master</code> there again?</li>
<li>One of the objects (<code>186ea78</code>) has the same hash as the previously made commit</li>
<li>...and look! An other object!</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
## Commit objects!

What is the object with the commit's hash?
```shell
$ git cat-file -t 186ea78
commit
```
```shell
$ git cat-file -p 186ea78
tree a44f211c376b94d122c6429ef8e87ffa7856419d
author Pablo Escodebar <escodebar@gmail.com> 1584390378 +0100
committer Pablo Escodebar <escodebar@gmail.com> 1584390378 +0100

Describe the training
```
...so this is what a commit looks like!

<aside class="notes"><ul>
<li>Git stores commits in objects as well</li>
<li>There is a reference to the tree (discussed in the next slide)</li>
<li>The author and the committer are not necessarily the same person</li>
<li>A timestamp is stored as well in the commit</li>
<li>The title and the message are stored in the commit object</li>
<li>The first commit (also called root) has no parent (more to parents later)</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
## Tree objects!

What is the object with the tree's hash?
```shell
$ git cat-file -t a44f211
tree
```

```shell
$ git cat-file -p a44f211
100644 blob b27501ade65f39bc91a5e6eb0d707903ba225a00	README.md
```
<!-- .element: style="font-size: 0.545em;" -->

...it's collection of references to objects!

<aside class="notes"><ul>
<li>The tree is an object containing references to the blobs (or other trees)</li>
<li>The tree also stores the permissions and the names of the files (but you can&#39;t set all permissions!)</li>
<li>If a file happens to be more than once in the repository, Git will save it only once, since all the trees will reference the same file</li>
</ul>
<p>By now, you know more about Git internals than many who consider themselves proficient in Git.
You will also be able to find &quot;lost&quot; files, folders and commits!</p>
</aside></script></section><section  data-markdown><script type="text/template">
## What was the last commit?

Take a look at a change using:
```shell
$ git show
commit 186ea78d81cffde456853bc6e2a72ae39444360d
Author: Pablo Escodebar <escodebar@gmail.com>
Date:   Mon Mar 16 21:26:18 2020 +0100

    Describe the training

diff --git a/README.md b/README.md
new file mode 100644
index 0000000..b27501a
--- /dev/null
+++ b/README.md
@@ -0,0 +1 @@
+# My awwwesome training
```
<!-- .element: style="font-size:0.5em;" -->

<aside class="notes"><ul>
<li>If no argument is passed, the currently checked out commit will be shown</li>
<li>You can also show trees, blobs and other commits by passing their hash</li>
<li>More details about commits are discussed in a few slides</li>
<li>The diff is also visible</li>
<li>As you can see, this command is similar to <code>git cat-file</code></li>
<li>You can change the output using options</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
## Add in patch mode

...to select the changes you want to stage
```shell
$ echo 'This training will make you better!' >> README.md && git add -p
diff --git a/README.md b/README.md
index b27501a..22d2d62 100644
--- a/README.md
+++ b/README.md
@@ -1 +1,2 @@
 # My awwwesome training
+This training will make you better!
(1/1) Stage this hunk [y,n,q,a,d,e,?]?
```
<!-- .element: style="font-size: 0.485em;" -->

```shell
$ git commit -m "Motivate the participant"
[master 9fc1d6b] Motivate the participant
 1 file changed, 1 insertion(+)
```

This is a great way to group your code!

<aside class="notes"><ul>
<li>This interactive process allow to select the hunks to add to the index.</li>
<li>Possible command during interactive mode:<ul>
<li>y - stage this hunk</li>
<li>n - do not stage this hunk</li>
<li>q - quit; do not stage this hunk or any of the remaining ones</li>
<li>a - stage this hunk and all later hunks in the file</li>
<li>d - do not stage this hunk or any of the later hunks in the file</li>
<li>g - select a hunk to go to</li>
<li>/ - search for a hunk matching the given regex</li>
<li>j - leave this hunk undecided, see next undecided hunk</li>
<li>J - leave this hunk undecided, see next hunk</li>
<li>s - split the current hunk into smaller hunks</li>
<li>e - manually edit the current hunk</li>
<li>? - print help</li>
</ul>
</li>
<li>You can always abort this command with <code>Ctrl-c</code></li>
<li>Some editor integrations allow you to add hunks of code to the index as well</li>
<li>Try to make groups of changes before adding them in patch mode</li>
<li>Once you grouped your changes, think of their logical order</li>
<li>Then add and commit them</li>
<li>This way of adding changes to the index requires some training until you feel comfortable</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
## How does the new commit look like?

This second commit shouldn't be a root commit:
```shell
$ git cat-file -p 9fc1d6b
tree 10d06a676fb65acc4b1a2e57454039d904318393
parent 186ea78d81cffde456853bc6e2a72ae39444360d
author Pablo Escodebar <escodebar@gmail.com> 1584390378 +0100
committer Pablo Escodebar <escodebar@gmail.com> 1584390378 +0100

Motivate the participant
```
...it has a parent!

<aside class="notes"><ul>
<li>Every commit (with exception of root commits) point to (at least) an other commit</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
## Commit in patch mode

My favorite way of committing!
```shell
$ echo "Buy me a beer if it made you better." >> README.md
$ git commit -p -m "Motivate the speaker"
diff --git a/README.md b/README.md
index 22d2d62..3f652ed 100644
--- a/README.md
+++ b/README.md
@@ -1,2 +1,3 @@
 # My awwwesome training
 This training will make you better!
+Buy me a beer if it made you better.
(1/1) Stage this hunk [y,n,q,a,d,e,?]? 
```

Once all hunks are decided, a commit will be created
```shell
[master b214f3e] Motivate the speaker
 1 file changed, 1 insertion(+)
```


<aside class="notes"><ul>
<li>It is like adding in patch mode and commit in one step!</li>
<li>Try adding in patch mode and committing while you feel insecure using the patch mode</li>
<li>Once you feel comfortable enough, start committing directly in patch mode to save time</li>
<li>The flags are the same as for the add command<ul>
<li>y - stage this hunk</li>
<li>n - do not stage this hunk</li>
<li>q - quit; do not stage this hunk or any of the remaining ones</li>
<li>a - stage this hunk and all later hunks in the file</li>
<li>d - do not stage this hunk or any of the later hunks in the file</li>
<li>g - select a hunk to go to</li>
<li>/ - search for a hunk matching the given regex</li>
<li>j - leave this hunk undecided, see next undecided hunk</li>
<li>J - leave this hunk undecided, see next hunk</li>
<li>s - split the current hunk into smaller hunks</li>
<li>e - manually edit the current hunk</li>
<li>? - print help</li>
</ul>
</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
## What did we do so far?

Take a look back at your work using:
```shell
$ git log --oneline
b214f3e Motivate the speaker
9fc1d6b Motivate the participant
186ea78 Describe the training
```
...so this is why we want short commit titles?

<aside class="notes"><ul>
<li>The newest commits are displayed on top</li>
<li>Without the <code>--oneline</code> flag, each commit would use several lines</li>
<li>We have a branch with three commmits.</li>
<li>This command is one of the reasons to choose short, meaningful commit titles</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
## Commit the repository's changes

Add the new objects to the repository's repository:
```shell
$ git add . && git commit -m "Use the patch mode"
[master d196c2d] Use the patch mode
 11 files changed, 8 insertions(+), 2 deletions(-)
 create mode 100644 objects/10/d06a676fb65acc4b1a2e57454039d904318393
 create mode 100644 objects/22/d2d6223474b8b442b8aae05d4deab6f57a4a2a
 create mode 100644 objects/38/52d81df67551ce4174a25ce844cf690499f55c
 create mode 100644 objects/3f/652ededa8ed2a054ffa2c02bb34f99b53e94dd
 create mode 100644 objects/9f/c1d6b28007e178a3e4241756288a3ddd7196c1
 create mode 100644 objects/b2/14f3eb6447de6481adbb383026f583eae59be6
```
<!-- .element: style="font-size: 0.465em;" -->

<!-- .slide: data-background="./gitception-flipped.jpg" -->

<aside class="notes"><ul>
<li>This is just to keep the working directory clean, to understand the next steps better</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
## Exercises

* Run the commands in the previous slides
* What's your mindset? Do you commit backups or changes?
* Add two different changes to a file and commit them separatedly
* Restore a file from a blob object
* Create a commit with two files and one blob object
</script></section><section  data-markdown><script type="text/template">
# Discussion

<aside class="notes"><ul>
<li>Backups vs Changes</li>
<li>Slicing changes</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
![Graph theory](https://imgs.xkcd.com/comics/collatz_conjecture.png)

<aside class="notes"><p>Take a look at the graph in the comic:</p>
<ul>
<li>No number appears twice</li>
<li>Each number points only to one number</li>
<li>...but several numbers can point to the same number</li>
<li>There are no loops</li>
<li>It is a directed graph</li>
<li>No matter where you start, if you follow the arrows, you&#39;ll always finish at one!</li>
</ul>
<p>This could be a valid graph of a Git repository!</p>
<ul>
<li>Each node in the comic could correspond to a commit</li>
</ul>
<p>We already started building such a graph! Now let&#39;s build branches!</p>
<ul>
<li>Creating branches with diverging commits</li>
<li>Add the changes of a branch to an other branch</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
## A branch

aka. *a reference*

"*References are pointers to commits.*"

* simplify complex workflows.
* allow to group the logic of a feature.
* allow to work in parallel on several features.

<aside class="notes"><ul>
<li>There are also other references: tags</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
## Create a branch

Branches are created using
```shell
$ git branch pe/new_branch

```

<aside class="notes"><ul>
<li>There are naming conventions for branches</li>
<li>Prefix branches with your initials, to tell others not to touch it</li>
<li>Reference the issue in the name if the branch is related to it</li>
<li>If the branch name looks like a folder path, Git will create folders</li>
<li>To work on a branch you need to check it out (or switch to it)</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
## Digging again!

How are branches stored in the repository?

```shell
$ git add . && git commit -m "Add a new branch"
[master f9a0e7a] Add a new branch
 2 files changed, 2 insertions(+)
 create mode 100644 logs/refs/heads/pe/new_branch
 create mode 100644 refs/heads/pe/new_branch
```
```shell
$ cat refs/heads/pe/new_branch
b214f3eb6447de6481adbb383026f583eae59be6
```

It's just a file with a hash

...that's why creating branches is so fast!

<!-- .slide: data-background="./gitception.jpg" -->

<aside class="notes"><ul>
<li>See how a further logfile was created? There is a log file for each branch!</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
## Remember git show?

Let's see what the hash is
```shell
$ git show b214f3eb6447de6481adbb383026f583eae59be6
commit b214f3eb6447de6481adbb383026f583eae59be6
Author: Pablo Escodebar <escodebar@gmail.com>
Date:   Mon Mar 16 21:26:18 2020 +0100

    Motivate the speaker

diff --git a/README.md b/README.md
index 22d2d62..3f652ed 100644
--- a/README.md
+++ b/README.md
@@ -1,2 +1,3 @@
 # My awwwesome training
 This training will make you better!
+Buy me a beer if it made you better.
```
<!-- .element: style="font-size: 0.44em" -->

A branch is just a hash of a commit

<aside class="notes"><ul>
<li>Deleting branches shouldn&#39;t scare you anymore!</li>
<li>If you accidentally delete a branch, you can create it again</li>
<li>You just need to find the right commit!</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
## Now let's check, check, check it out!

```shell
$ git checkout pe/new_branch
Switched to branch 'pe/new_branch'
```

... to add further commit to it!

<aside class="notes"><ul>
<li>As noted before, it is necessary to switch to a branch to add commits</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
## What happened in the repo?

```shell
$ git add . && git commit -m "Check out the branch"
[master ca01bdc] Check out the branch
 2 files changed, 2 insertions(+), 1 deletion(-)
```

2 files changed... but what changed?

<!-- .slide: data-background="./gitception-flipped.jpg" -->
</script></section><section  data-markdown><script type="text/template">
### Let's take a closer look

`git show` comes with many options:
```shell
$ git show --name-only
commit ca01bdcc8541759de23af63f8110291440bcbff7
Author: Pablo Escodebar <escodebar@gmail.com>
Date:   Mon Mar 16 21:26:18 2020 +0100

    Check out the branch

HEAD
logs/HEAD
```

...ah! the `HEAD` changed!

<!-- .slide: data-background="./gitception.jpg" -->

<aside class="notes"><ul>
<li>Run <code>git help show</code> once, to see all of the options!</li>
<li>We are discussing the <code>HEAD</code> more in detail later during this training</li>
<li>We are also taking a look at the logs later</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
## Create and checkout branches
## ...in one step!

Switch to a *new* branch using checkout:
```shell
$ git checkout -b pe/add_list_of_favorite_beers master
Switched to a new branch 'pe/add_list_of_favorite_beers'
```
...one command is faster than two!

<aside class="notes"><ul>
<li>If you leave the starting point (<code>master</code> here), the current <code>HEAD</code> is used</li>
<li><code>git checkout</code> is criticized to be overloaded with functionality, we are discussing this in more detail later</li>
<li><code>git checkout</code> might require some runtime, depending on the size of the files to be copied</li>
</ul>
<p>Now that we know how to create branches, let&#39;s create two with diverging history!</p>
</aside></script></section><section  data-markdown><script type="text/template">
## Add a commit to the new branch

```shell
$ cat << EOBL > beers.md && git add beers.md
* To Øl - 1 ton of Happiness
* Rokki - Muikea
* Felsenau - Bärner Müntschi
* Rokki - Happo
* Egger - Galopper
EOBL
$ echo "My list of [favorite beers](beers.md)." >> README.md
$ git commit -a -m "Let people know, what beer to buy"
[pe/add_list_of_favorite_beers cceb198] Let people know, what beer to buy
 2 files changed, 6 insertions(+)
 create mode 100644 beers.md
```
<!-- .element: style="font-size: 0.47em;" -->

<aside class="notes"><ul>
<li>The first command creates and adds a file called &quot;beers.md&quot; (take a minute to digest it)</li>
<li>The <code>-a</code> flag commits adding all <em>tracked</em> and modified files to the staging area!</li>
<li>We created a new file and added a change to the existing one</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
## Create another branch

```shell
$ git checkout -b pe/whiskey_is_also_an_option master
Switched to a new branch 'pe/whiskey_is_also_an_option'
```

...with another commit
```shell
$ echo "Whiskey is also a good reward." >> README.md
$ cat << EOWL > whiskeys.md && git add whiskeys.md
* Lagavulin - 16
* Ledaig - 10
* Talisker - Storm
* Ledaig - 18
* Laphroaig - Quarter Cask
EOWL
$ echo '[These whiskeys](whiskeys.md) are great!' >> README.md
$ git commit -am "Accept whiskey as reward"
[pe/whiskey_is_also_an_option 5831d48] Accept whiskey as reward
 2 files changed, 7 insertions(+)
 create mode 100644 whiskeys.md
```
<!-- .element: style="font-size: 0.545em;" -->

<aside class="notes"><ul>
<li>Options can also be put together <code>-a -m</code> is the same as <code>-am</code></li>
<li>We created a new file and added a change to the existing one, at the same place where the other branch introduce a change</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
## Clean up!

We do not want to have uncommitted changes 
```shell
$ git add . && git commit -m "Add branches with conflicting commits"
[master 6ba54e2] Add branches with conflicting commits
 16 files changed, 18 insertions(+), 2 deletions(-)
 create mode 100644 logs/refs/heads/pe/add_list_of_favorite_beers
 create mode 100644 logs/refs/heads/pe/whiskey_is_also_an_option
 create mode 100644 objects/0d/f4281955475551ad1a4232fce76a5fb6d340d0
 create mode 100644 objects/21/990ee9610d1601649ca9c669f7f51ecad5358b
 create mode 100644 objects/58/31d48f2c84c3a5272250d5d6df1a73235ec52d
 create mode 100644 objects/7e/c764e3ac5af8a360fc2df5ac5c58aa5bffcd11
 create mode 100644 objects/9c/8d69a8414db1654a6c725de0c670fa28df33a4
 create mode 100644 objects/a2/8e0af61a8785cfec49e2ea707f8172d4b93b78
 create mode 100644 objects/cc/eb198cbd3acfef47a664a5e730f13a20af2650
 create mode 100644 objects/d3/719373bb86bdd46c56e521135a1bd7f69d40ab
 create mode 100644 refs/heads/pe/add_list_of_favorite_beers
 create mode 100644 refs/heads/pe/whiskey_is_also_an_option
```
<!-- .element: style="font-size: 0.5em;" -->

<!-- .slide: data-background="./gitception-flipped.jpg" -->

<aside class="notes"><ul>
<li>Now we should have a graph with two branches.</li>
<li>Could you draw the graph of our Git repository?</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
## What a beautiful tree

Take a look at the graph of the repository using:
```shell
$ git log --oneline --all --graph
* cceb198 Let people know, what beer to buy
| * 5831d48 Accept whiskey as reward
|/  
* b214f3e Motivate the speaker
* 9fc1d6b Motivate the participant
* 186ea78 Describe the training
```
<!-- .element: style="font-size: 0.46em;" -->
Our tree starts growing branches!

<aside class="notes"><ul>
<li>Using <code>--all</code> you can display commits of other branches as well (and the stash!)</li>
<li>The graph is a little bit more hard to read: the lines represent connections</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
## Exercises

* Run the commands in the previous slides
* Go into "detached `HEAD` mode" and back
* Delete and recover a branch with some commits
* Create a new branch based on a commit
* Take a look at the graph of a more mature project
* Create a new branch using then `--orphan` option
</script></section><section  data-markdown><script type="text/template">
# Discussion
</script></section><section  data-markdown><script type="text/template">
![Git](https://assets.amuniversal.com/ddf1fa20315201378d0e005056a9545d)

<aside class="notes"><ul>
<li>We are discussing how to add changes of branch to another branch</li>
<li>There are several ways and workflows to achieve this</li>
<li>Conflicts often arise when combining changes of several files</li>
<li>You need to chose the workflow according to your projects&#39; needs and developers&#39; skills</li>
</ul>
<p>We created branches with diverging history and a conflict, to simulate common situations.</p>
</aside></script></section><section  data-markdown><script type="text/template">
## Wait... What?

# Conflicts?!

<aside class="notes"><ul>
<li>Conflicts happen when a file is changed and it is not obvious (to Git) how the changes should be applied</li>
<li>There are also silent conflicts... let&#39;s discuss these later</li>
<li>Let&#39;s introduce a change to our branch to provoque a conflict</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
## Git merge

![merge](https://wac-cdn.atlassian.com/dam/jcr:83323200-3c57-4c29-9b7e-e67e98745427/Branch-1.png?cdnVersion=lj)<!-- .element: height="380px" style="background: white;" -->


Join development histories

<aside class="notes"><ul>
<li>This (may) result in a forked (non-linear) commit-history (you have several ways to get to the root)</li>
<li>If the changes are fast forward, then no merge commit is created</li>
<li>You merge the changes of the other branch into your branch (the commit merge is added to the branch you are working on)</li>
<li>Several branches can be merged at once</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
## Let's merge

Checkout a new branch for the merge
```shell
$ git checkout -b pe/merging pe/add_list_of_favorite_beers
Switched to a new branch 'pe/merging'
```

Merge...
```shell
$ git merge pe/whiskey_is_also_an_option
Auto-merging README.md
CONFLICT (content): Merge conflict in README.md
Automatic merge failed; fix conflicts and then commit the result.
```
<!-- .element: style="font-size: 0.545em;" -->
...and run into conflicts!

<aside class="notes"><ul>
<li>A new branch is not required, this just keeps the previous branches intact</li>
<li>The output of the merge command is self explaining</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
## Merge conflicts are fun!

How does Git handle merge conflicts?
```shell
$ git add . && git commit -m "Commit during merge conflict"
[master 232c30c] Commit during merge conflict
 10 files changed, 14 insertions(+), 1 deletion(-)
 create mode 100644 MERGE_HEAD
 create mode 100644 MERGE_MODE
 create mode 100644 MERGE_MSG
 create mode 100644 ORIG_HEAD
 rewrite index (100%)
 create mode 100644 logs/refs/heads/pe/merging
 create mode 100644 objects/74/53e34d766307d5056d804f80e4cc2395fb4179
 create mode 100644 refs/heads/pe/merging
```
<!-- .element: style="font-size: 0.505em" -->

A further object?

<!-- .slide: data-background="./gitception.jpg" -->

<aside class="notes"><ul>
<li>The <code>MERGE_HEAD</code> points to <code>pe/whiskey_is_also_an_option</code>&#39;s tip commit</li>
<li>The <code>MERGE_MODE</code> is not discussed here</li>
<li>Take a look at the <code>MERGE_MSG</code> if you feel like it</li>
<li><code>ORGI_HEAD</code> points to <code>pe/add_list_of_favorite_beers</code>&#39; tip commit</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
## Take a look at that object!

We are getting used to this!
```shell
$ git cat-file -t 7453e34
blob
```
```shell
$ git cat-file -p 7453e34
# My awwwesome training
This training will make you better!
Buy me a beer if it made you better.
<<<<<<< HEAD
My list of [favorite beers](beers.md).
=======
Whiskey is also a good reward.
[These whiskeys](whiskeys.md) are great!
>>>>>>> pe/whiskey_is_also_an_option
```

Looks like the `README` file... 

<aside class="notes"><ul>
<li>Git stores conflicting files in objects as well</li>
<li>The conflicting part is marked by <code>&lt;&lt;&lt;&lt;&lt;&lt;&lt;</code>, <code>=======</code> and <code>&gt;&gt;&gt;&gt;&gt;&gt;&gt;</code></li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
## What's the status?

Let's take a look at the status:
```shell
$ git status
On branch pe/merging
You have unmerged paths.
  (fix conflicts and run "git commit")
  (use "git merge --abort" to abort the merge)

Changes to be committed:
	new file:   whiskeys.md

Unmerged paths:
  (use "git add <file>..." to mark resolution)
	both modified:   README.md
```
As expected, a file was modified by both branches!

<aside class="notes"><ul>
<li><code>README.md</code> is modified by both branches, such that Git cannot tell how the changes should be merged.</li>
<li>Git is telling you what to do: either fix the conflicts or abort the merge</li>
<li>Did you notice Git added <code>whiskeys.md</code> as a change to be commited?</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
## Understanding the conflict

Take a look at the conflicting files:
```shell
$ git diff
diff --cc README.md
index d371937,a28e0af..0000000
--- a/README.md
+++ b/README.md
@@@ -1,4 -1,5 +1,9 @@@
  # My awwwesome training
  This training will make you better!
  Buy me a beer if it made you better.
++<<<<<<< HEAD
 +My list of [favorite beers](beers.md).
++=======
+ Whiskey is also a good reward.
+ [These whiskeys](whiskeys.md) are great!
++>>>>>>> pe/whiskey_is_also_an_option
```

This conflict is easily solved!

<aside class="notes"><p>If the conflict is not that easy, you can:</p>
<ol>
<li><code>git log</code> both branches</li>
<li>identify the commits which introduce the conflict</li>
<li>read the commit messages and understand why the changes were introduced</li>
<li>speak to the author of the change and find a solution</li>
</ol>
<ul>
<li>If the commit messages are of good quality, understanding the changes won&#39;t be a big deal</li>
<li>if the commit messages are bad, I suggest you contact the author(s) of the conflicting changes</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
## Conflict resolution

Just remove the 4th, 6th and last line.
```shell
$ sed -i '4d;6d;$d' README.md
```

```shell
$ cat README.md
# My awwwesome training
This training will make you better!
Buy me a beer if it made you better.
My list of [favorite beers](beers.md).
Whiskey is also a good reward.
[These whiskeys](whiskeys.md) are great!
```

Use your favorite editor to do so!

<aside class="notes"><ul>
<li>To resolve a conflict, edit the conflicting files such that it fits the requirements of both changes</li>
<li>I would consider testing the application after the conflicts are resolved before finish merging</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
## Finish merging

...once you resolved the conflicts:
```shell
$ git add README.md
```

and run
```shell
$ git merge --continue
```
to open your editor to write the commit's message

or commit yourself directly
```shell
$ git commit -m "Add the list of beers first"
[pe/merging e75139d] Add the list of beers first
```
That was easy!

<aside class="notes"><ul>
<li>You can also run <code>git merge --continue</code>, which checks if there is an (interrupted) merge in progress before calling <code>git commit</code></li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
## Take a look at the merge commit

Merge commits are special...
```shell
$ git cat-file -t e75139d
commit
```
```shell
$ git cat-file -p e75139d
tree d5a29e72348dd06004654c605f561d7d6fc32e6c
parent cceb198cbd3acfef47a664a5e730f13a20af2650
parent 5831d48f2c84c3a5272250d5d6df1a73235ec52d
author Pablo Escodebar <escodebar@gmail.com> 1584390378 +0100
committer Pablo Escodebar <escodebar@gmail.com> 1584390378 +0100

Add the list of beers first
```
...since they have more than one parent!

<aside class="notes"><ul>
<li>This makes error analysis a little bit more complex</li>
<li>You need to follow up the changes of several parents now when looking for errors</li>
<li>This can be accomplished by using ^1, ^2 or ^N (to reach the N-th direct parent)</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
## Meet the parents

```shell
$ git show HEAD^1
commit cceb198cbd3acfef47a664a5e730f13a20af2650
Author: Pablo Escodebar <escodebar@gmail.com>
Date:   Mon Mar 16 21:26:18 2020 +0100

    Let people know, what beer to buy

diff --git a/README.md b/README.md
index 3f652ed..d371937 100644
--- a/README.md
+++ b/README.md
@@ -1,3 +1,4 @@
 # My awwwesome training
 This training will make you better!
 Buy me a beer if it made you better.
+My list of [favorite beers](beers.md).
diff --git a/beers.md b/beers.md
new file mode 100644
index 0000000..7ec764e
--- /dev/null
+++ b/beers.md
@@ -0,0 +1,5 @@
+* To Øl - 1 ton of Happiness
+* Rokki - Muikea
+* Felsenau - Bärner Müntschi
+* Rokki - Happo
+* Egger - Galopper
```

<aside class="notes"><p>You can also use <code>~</code> to see the parent of one of the parents:</p>
<ul>
<li><code>git show HEAD^1~2</code> shows the first parents parents parent</li>
<li><code>git show HEAD^3~1</code> shows the third parents parent</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
## Meet the parents 2
```shell
$ git show HEAD^2
commit 5831d48f2c84c3a5272250d5d6df1a73235ec52d
Author: Pablo Escodebar <escodebar@gmail.com>
Date:   Mon Mar 16 21:26:18 2020 +0100

    Accept whiskey as reward

diff --git a/README.md b/README.md
index 3f652ed..a28e0af 100644
--- a/README.md
+++ b/README.md
@@ -1,3 +1,5 @@
 # My awwwesome training
 This training will make you better!
 Buy me a beer if it made you better.
+Whiskey is also a good reward.
+[These whiskeys](whiskeys.md) are great!
diff --git a/whiskeys.md b/whiskeys.md
new file mode 100644
index 0000000..0df4281
--- /dev/null
+++ b/whiskeys.md
@@ -0,0 +1,5 @@
+* Lagavulin - 16
+* Ledaig - 10
+* Talisker - Storm
+* Ledaig - 18
+* Laphroaig - Quarter Cask
```

<aside class="notes"><p>At some point it is easier to run:</p>
<ol>
<li><code>git log --oneline --graph --all</code> and identify the commit to see</li>
<li><code>git show</code> using the commit&#39;s hash</li>
</ol>
</aside></script></section><section  data-markdown><script type="text/template">
## Clean up!

Commit the changes into the repository's repository
```shell
$ git add . && git commit -m "Add the merge"
[master 1aa403c] Add the merge
 11 files changed, 6 insertions(+), 7 deletions(-)
 delete mode 100644 MERGE_HEAD
 delete mode 100644 MERGE_MODE
 delete mode 100644 MERGE_MSG
 rewrite index (100%)
 create mode 100644 objects/93/d56bde8cd7e1ac44d1f4f454a189b71b7b0d1f
 create mode 100644 objects/d5/a29e72348dd06004654c605f561d7d6fc32e6c
 create mode 100644 objects/e7/5139dd47742220cb4f2d0d0ec8fb439c2dad60
```
<!-- .element: style="font-size: 0.51em;" -->

The merge files are gone!

<!-- .slide: data-background="./gitception-flipped.jpg" -->

<aside class="notes"><ul>
<li>What do the new objects contain? [The merge commit, the new tree and the <code>README</code> file]</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
## Git cherry-pick

![cherry pick](https://wac-cdn.atlassian.com/dam/jcr:8d62148d-ba03-4762-bd3a-06ddc465b07f/hero.svg?cdnVersion=jo) <!-- .element: height="300px" style="background: white" -->


Apply the changes introduced by some existing commits

<aside class="notes"><ul>
<li>This results in a linear commit-history</li>
<li>You can also cherry pick many commits</li>
<li>Merge commits can be cherry-picked! (But you need to specify the mainline)</li>
<li>Cherry picked commits are added (copied) to the current branch</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
## Pick a cherry

Let's add another branch for cherry picking
```shell
$ git checkout -b pe/cherry_picking pe/add_list_of_favorite_beers
Switched to a new branch 'pe/cherry_picking'
```
<!-- .element: style="font-size: 0.545em;" -->

Find the hash of the cherry (commit) to be picked
```shell
$ git log --oneline pe/whiskey_is_also_an_option
5831d48 Accept whiskey as reward
b214f3e Motivate the speaker
9fc1d6b Motivate the participant
186ea78 Describe the training
```

<aside class="notes"><ul>
<li>Before you cherry pick a commit, you need to identify it</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
...then pick it up!
```shell
$ git cherry-pick pe/whiskey_is_also_an_option
Auto-merging README.md
CONFLICT (content): Merge conflict in README.md
```

<aside class="notes"><ul>
<li>The better documented your commits are, the better you can work with them.</li>
<li>Here we are cherry-picking a branch, therefore we cherry-pick the commit to which the branch is pointing to</li>
<li>We could have used the commit&#39;s hash</li>
<li>Boom, conflict!</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
## Sweet sweet conflicts

Dig, dig, dig, dig
```shell
$ git add . && git commit -m "Commit a cherry pick conflict"
[master d29d7cf] Commit a cherry pick conflict
 8 files changed, 10 insertions(+), 1 deletion(-)
 create mode 100644 CHERRY_PICK_HEAD
 create mode 100644 MERGE_MSG
 rewrite index (100%)
 create mode 100644 logs/refs/heads/pe/cherry_picking
 create mode 100644 objects/21/5816160419794641e5354a574cba6dbd6712fc
 create mode 100644 refs/heads/pe/cherry_picking
```
<!-- .element: style="font-size: 0.495em" -->

Another object!

<!-- .slide: data-background="./gitception.jpg" -->

<aside class="notes"><ul>
<li>This is again the conflicting file</li>
</ul>
<p>Question:</p>
<ul>
<li>Why is the conflicting file different? [See next slide]</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
## So what's the conflict now?

```shell
$ git diff
diff --cc README.md
index d371937,a28e0af..0000000
--- a/README.md
+++ b/README.md
@@@ -1,4 -1,5 +1,9 @@@
  # My awwwesome training
  This training will make you better!
  Buy me a beer if it made you better.
++<<<<<<< HEAD
 +My list of [favorite beers](beers.md).
++=======
+ Whiskey is also a good reward.
+ [These whiskeys](whiskeys.md) are great!
++>>>>>>> 5831d48... Accept whiskey as reward
```

as expected, the conflict looks almost the same!

<aside class="notes"><ul>
<li>The only difference is that the hash and commit title are used!</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
## Use a mergetool

...to fix the conflict!

```shell
$ git mergetool
```

Conflict resolution with assistance!

Or fix the conflict manually if you prefer
```shell
$ sed -i '4d;6d;$d' README.md && git add README.md

```

<aside class="notes"><ul>
<li>If you use the <code>mergetool</code> backup files will be created in your working directory</li>
<li>Also edited files will be added to the staging area automatically after closing the <code>mergetool</code></li>
<li>You can configure Git not to create the backup file</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
## Continue cherry-picking

...once you finished fixing the conflict
```shell
$ git cherry-pick --continue
```

...or commit the staged changes with an existing commit message
```shell
$ git commit -C pe/whiskey_is_also_an_option
[pe/cherry_picking 2e0ed18] Accept whiskey as reward
 Date: Mon Mar 16 21:26:18 2020 +0100
 2 files changed, 7 insertions(+)
 create mode 100644 whiskeys.md
```
</script></section><section  data-markdown><script type="text/template">
## Clean up!

Once again...
```shell
$ git add . && git commit -m "Add the cherry-pick"
[master f6256fe] Add the cherry-pick
 8 files changed, 4 insertions(+), 7 deletions(-)
 delete mode 100644 CHERRY_PICK_HEAD
 delete mode 100644 MERGE_MSG
 rewrite index (100%)
 create mode 100644 objects/2e/0ed18b60e15d74239d1e32740e30b963e3aec3
```
<!-- .element: style="font-size: 0.505em;" -->

<!-- .slide: data-background="./gitception-flipped.jpg" -->

<aside class="notes"><ul>
<li>There are only 2 new objects... How many would you expect?</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
## Git rebase

![rebase](https://wac-cdn.atlassian.com/dam/jcr:e4a40899-636b-4988-9774-eaa8a440575b/02.svg?cdnVersion=lj) <!-- .element: height="350px" style="background: white" -->

> Reapply commits on top of another branch<!-- .element: style="font-size: 0.95em;" -->

<aside class="notes"><ul>
<li>This generates a linear history-tree without forks</li>
<li>This is handy if you need to cherry-pick all commits of a branch</li>
<li>The golden rule of rebasing: Never rebase a public branch! (...or teach your coworkers Git)</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
## Rebase yourself!

```shell
$ git checkout -b pe/rebasing pe/whiskey_is_also_an_option
Switched to a new branch 'pe/rebasing'
```
```shell
$ git rebase pe/add_list_of_favorite_beers
First, rewinding head to replay your work on top of it...
Applying: Accept whiskey as reward
Using index info to reconstruct a base tree...
M	README.md
Falling back to patching base and 3-way merge...
Auto-merging README.md
CONFLICT (content): Merge conflict in README.md
Patch failed at 0001 Accept whiskey as reward
Resolve all conflicts manually, mark them as resolved with
"git add/rm <conflicted_files>", then run "git rebase --continue".
You can instead skip this commit: run "git rebase --skip".
To abort and get back to the state before "git rebase", run "git rebase --abort".
```
<!-- .element: style="font-size: 0.43em" -->

...that's a lot of output!

<aside class="notes"><ul>
<li>This time &quot;the point of view&quot; changes, therefore we checkout the branch which will be rebased</li>
<li>The branch onto which you are rebasing to remains untouched</li>
<li>The history of the active branch is rewritten</li>
<li>If there is more than one conflicting commit, <code>git rebase</code> will stop at each conflict</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
## Rebasing

...is "slightly" more complicated:
```shell
$ git add . && git commit -m "Commit a rebase conflict"
[master dc0aa75] Commit a rebase conflict
 29 files changed, 79 insertions(+), 2 deletions(-)
 create mode 100644 REBASE_HEAD
 rewrite index (100%)
 create mode 100644 logs/refs/heads/pe/rebasing
 create mode 100644 objects/85/c2d4e6fc7a00c7e49bd1d851f54863fd39605f
 create mode 100644 rebase-apply/0001
 create mode 100644 rebase-apply/abort-safety
 create mode 100644 rebase-apply/apply-opt
 create mode 100644 rebase-apply/author-script
 create mode 100644 rebase-apply/final-commit
 create mode 100644 rebase-apply/head-name
 create mode 100644 rebase-apply/keep
 create mode 100644 rebase-apply/last
 create mode 100644 rebase-apply/messageid
 create mode 100644 rebase-apply/next
 create mode 100644 rebase-apply/onto
 create mode 100644 rebase-apply/orig-head
 create mode 100644 rebase-apply/original-commit
 create mode 100644 rebase-apply/patch
 create mode 100644 rebase-apply/patch-merge-index
 create mode 100644 rebase-apply/quiet
 create mode 100644 rebase-apply/rebasing
 create mode 100644 rebase-apply/scissors
 create mode 100644 rebase-apply/sign
 create mode 100644 rebase-apply/threeway
 create mode 100644 rebase-apply/utf8
 create mode 100644 refs/heads/pe/rebasing
```
<!-- .element: style="font-size:0.5em;" -->

<!-- .slide: data-background="./gitception.jpg" -->

<aside class="notes"><ul>
<li>A new object is added for the conflicting file</li>
<li>Git keeps track of a lot of state to perform a rebase</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
## Take a closer look at the conflict

```shell
$ git diff
diff --cc README.md
index d371937,a28e0af..0000000
--- a/README.md
+++ b/README.md
@@@ -1,4 -1,5 +1,9 @@@
  # My awwwesome training
  This training will make you better!
  Buy me a beer if it made you better.
++<<<<<<< HEAD
 +My list of [favorite beers](beers.md).
++=======
+ Whiskey is also a good reward.
+ [These whiskeys](whiskeys.md) are great!
++>>>>>>> Accept whiskey as reward
```
The reference here is the commit's title!

<aside class="notes"><ul>
<li>This is helpful to determine how to solve the conflict</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
## Finish rebasing

...once you resolved the conflicts:
```shell
$ sed -i '4d;6d;$d' README.md && git add README.md && git rebase --continue
Applying: Accept whiskey as reward
```
<!-- .element: style="font-size:0.47em;" -->
</script></section><section  data-markdown><script type="text/template">
## What about the rebase files?

```shell
$ git add . && git commit -m "Add the rebase"
[master 430c137] Add the rebase
 27 files changed, 5 insertions(+), 75 deletions(-)
 delete mode 100644 REBASE_HEAD
 rewrite index (100%)
 delete mode 100644 rebase-apply/0001
 delete mode 100644 rebase-apply/abort-safety
 delete mode 100644 rebase-apply/apply-opt
 delete mode 100644 rebase-apply/author-script
 delete mode 100644 rebase-apply/final-commit
 delete mode 100644 rebase-apply/head-name
 delete mode 100644 rebase-apply/keep
 delete mode 100644 rebase-apply/last
 delete mode 100644 rebase-apply/messageid
 delete mode 100644 rebase-apply/next
 delete mode 100644 rebase-apply/onto
 delete mode 100644 rebase-apply/orig-head
 delete mode 100644 rebase-apply/original-commit
 delete mode 100644 rebase-apply/patch
 delete mode 100644 rebase-apply/patch-merge-index
 delete mode 100644 rebase-apply/quiet
 delete mode 100644 rebase-apply/rebasing
 delete mode 100644 rebase-apply/scissors
 delete mode 100644 rebase-apply/sign
 delete mode 100644 rebase-apply/threeway
 delete mode 100644 rebase-apply/utf8
```
<!-- .element: style="font-size: 0.5em" -->

They are gone!

<!-- .slide: data-background="./gitception-flipped.jpg" -->

<aside class="notes"><ul>
<li>There are only 2 new objects... How many would you expect?</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
## Non obvious conflicts

Sometimes conflicts are introduced, which are not obvious to Git:

If one of the branches changes the behavior of a part of the code and the old behavior is required for the other branch, but there is no conflict within the files... then Git won't alert you!

How do you solve this?

<aside class="notes"><ul>
<li>There are several ways to solve this, and it is not strictly Git related</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
## Tests to the rescue!

You can run your tests while rebasing:
```shell
$ git rebase -x "pytest" <newbase>
```

If the tests fail, Git will stop the rebase and allow you to fix your code

<aside class="notes"><ul>
<li>This requires to have a test which will break when such a conflict arises</li>
<li>If you test your code for behavior, this kind of conflicts are catched</li>
<li>Now go tell Fredrik V. Mørken how he should be using <code>git rebase</code></li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
## Exercises

* Run the commands in the previous slides
* Abort a `merge`, `cherry-pick` or a `rebase`
* Merge two branches with different roots
* Create a commit with 3 parents
* Cherry-pick two commits at once
* Cherry-pick a merge commit
* Use `git rebase --onto`
</script></section><section  data-markdown><script type="text/template">
# Discussion

<aside class="notes"><ul>
<li>Cherry-picking using backups instead of changes</li>
<li>Checking the change in test coverage of every commit</li>
<li>Signs of bad architecture</li>
<li>Rewriting the history</li>
<li>Garbage collection</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
![Git log](https://imgs.xkcd.com/comics/git_commit_2x.png)<!-- .element: height="400px" -->

<aside class="notes"><ul>
<li>Please do not do this!</li>
<li>Keep a the information to noise ratio high</li>
<li>This is important for later code analysis</li>
<li>Think of the people who will deal with your repository</li>
<li>Think of the repositories you will deal with</li>
<li>There are several strategies to clean such a history</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
## Backups vs. Patches

Version control is a system that records changes to a file or set of files over time ...so that you can recall specific *states* later.
<!-- .element: class="fragment" -->

Version control is a system that allows to write and manage sets of *patches* ...so that you can recall specific *versions* later.
<!-- .element: class="fragment" -->

<aside class="notes"><ul>
<li>The concept of backups is common and backups are widely-used</li>
<li>The concept of changes / patches, requires a better overview</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
## Preparing the branch of backups

Add a branch with a few commits
```shell
$ git checkout -b pe/backups pe/rebasing
Switched to a new branch 'pe/backups'
$ echo "I would also love some feedback." >> README.md
$ git commit -am "Ask for feedback"
[pe/backups afa6d5c] Ask for feedback
 1 file changed, 1 insertion(+)
$ echo "Personal feedback is the best." >> README.md
$ git commit -am "Ask for personal feedback"
[pe/backups 640ab41] Ask for personal feedback
 1 file changed, 1 insertion(+)
$ echo "Helpful feedback is awarded with great coffee." >> README.md
$ git commit -am "Trade feedback for coffee"
[pe/backups c50ee29] Trade feedback for coffee
 1 file changed, 1 insertion(+)
```
<!-- .element: style="font-size: 0.52em" -->

<aside class="notes"><ul>
<li>This is similar to the situation displayed in the comic</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
## Clean up! 

```shell
$ git add . && git commit -m "Add the branch of backups"
[master 6373f67] Add the branch of backups
 15 files changed, 19 insertions(+), 2 deletions(-)
 create mode 100644 logs/refs/heads/pe/backups
 create mode 100644 objects/34/96ebedc52ee70e2b129e315084623c7deea6a2
 create mode 100644 objects/44/09126657b95c9c83a73ac6d730ae7353b6aac1
 create mode 100644 objects/4f/56584f94dc324de2c2ffd66b4e145a6912f480
 create mode 100644 objects/58/ad30ba9d86b178e9c878ac031b1217d89ac4a7
 create mode 100644 objects/64/0ab41887937145665f795764990ad4627a262e
 create mode 100644 objects/af/a6d5c8b9783cccac7bb417ffb33217e21be293
 create mode 100644 objects/c3/2f3348d4d95fed6ff7c80054daf3690c50e390
 create mode 100644 objects/c5/0ee29d790b0722ea0f15fe452f1de84e567b73
 create mode 100644 objects/f1/c24400178f30d7f56ac2967d2fd796968197d5
 create mode 100644 refs/heads/pe/backups
```
<!-- .element: style="font-size: 0.5em" -->

<!-- .slide: data-background="./gitception.jpg" -->

<aside class="notes"><ul>
<li>Why were 9 objects created? [3 commits with each having a tree and a blob]</li>
<li>Now we are going to discuss 3 different ways to combine or work with this commit history</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
## Rebasing in interactive mode

"Change" the commit history during rebase!

```shell
$ git checkout -b pe/interactive_rebase pe/backups
Switched to a new branch 'pe/interactive_rebase'
```

This is like rebasing
```shell
$ git rebase -i pe/rebasing
```
...on steroids!

<aside class="notes"><ul>
<li>This is a really powerful tool to organize the commit history and make it more meaningful</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
Your editor now lists all the commits of your branch!
```text
pick afa6d5c Ask for feedback
pick 640ab41 Ask for personal feedback
pick c50ee29 Trade feedback for coffee

# Rebase 2e0ed18..c50ee29 onto 2e0ed18 (3 commands)
#
# Commands:
# p, pick <commit> = use commit
# r, reword <commit> = use commit, but edit the commit message
# e, edit <commit> = use commit, but stop for amending
# s, squash <commit> = use commit, but meld into previous commit
# f, fixup <commit> = like "squash", but discard this commit's log message
# x, exec <command> = run command (the rest of the line) using shell
# d, drop <commit> = remove commit
# l, label <label> = label current HEAD with a name
# t, reset <label> = reset HEAD to a label
# m, merge [-C <commit> | -c <commit>] <label> [# <oneline>]
# .       create a merge commit using the original merge commit's
# .       message (or the oneline, if no original merge commit was
# .       specified). Use -c <commit> to reword the commit message.
#
# These lines can be re-ordered; they are executed from top to bottom.
#
# If you remove a line here THAT COMMIT WILL BE LOST.
#
#   However, if you remove everything, the rebase will be aborted.
#
#
# Note that empty commits are commented out
```
<!-- .element: style="font-size: 0.47em;" -->

<aside class="notes"><ul>
<li>You can:<ul>
<li>Change the order of the commits</li>
<li>Edit the commit titles</li>
<li>Edit commits</li>
<li>Run commands between the commits
...</li>
</ul>
</li>
<li>The first command cannot be a squash or a fixup!</li>
<li>Drop, squash, fix up or change the order of the commits as required</li>
<li>Mastering the interactive rebase is worth a salary raise!</li>
<li>There are commit commands to create automtic fixup and squash commands!</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
## There's a shortcut!

...to avoid having to move commits around
```shell
$ git help commit | grep "autosquash" -C 2

       --fixup=<commit>
           Construct a commit message for use with rebase --autosquash. The commit message will be
           the subject line from the specified commit with a prefix of "fixup! ". See git-rebase(1)
           for details.

       --squash=<commit>
           Construct a commit message for use with rebase --autosquash. The commit message subject
           line is taken from the specified commit with a prefix of "squash! ". Can be used with
           additional commit message options (-m/-c/-C/-F). See git-rebase(1) for details.

```
<!-- .element: style="font-size: 0.355em" -->

<aside class="notes"><ul>
<li>Use these two when you already know that a commit belongs to an other one</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
## Commit the changes in the repository

```shell
$ git add . && git commit -m "Rebase in interactive mode"
[master dda82ba] Rebase in interactive mode
 4 files changed, 4 insertions(+), 1 deletion(-)
 create mode 100644 logs/refs/heads/pe/interactive_rebase
 create mode 100644 refs/heads/pe/interactive_rebase
```

<!-- .slide: data-background="./gitception-flipped.jpg" -->

<aside class="notes"><ul>
<li>This output is expected if you only used the command &quot;pick&quot;.</li>
<li>If you squashed or fixed up commits, more objects would have been created.</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
## Exercises

* Change the order of commits
* Create a `--fixup` or `--squash` commit
* Rebase a branch using the `--autosquash` flag
* Run an interactive rebase with the `-x` option
* Edit a commit during a rebase
</script></section><section  data-markdown><script type="text/template">
# Discussion
</script></section><section  data-markdown><script type="text/template">
## But what if

* ...it is more complex?
* ...commits need to be split?
* ...part of a commit sneaked into another commit?

`reset`, `checkout` and `stash` to the help!

<aside class="notes"><ul>
<li>The reset and checkout commands are two of the most confusing parts of Git when first encountered</li>
<li>They do many different things depending on the used arguments</li>
<li>Once you think you understood them, you will find another usage which will change your concept of these commands completely (or to a big part)</li>
<li>Let&#39;s therefore &quot;demystify&quot; these commands!</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
## The Three Trees

* the `HEAD`
* the index
* Working Directory

<aside class="notes"><ul>
<li>The <code>HEAD</code> is the last commit (also the next parent), what we called &quot;the repository&quot; before</li>
<li>The index is the proposed next commit, what&#39;s on our fork</li>
<li>The working directory is our sandbox</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
![The three trees](https://git-scm.com/book/en/v2/images/reset-workflow.png)<!-- .element: height="500px" -->

<aside class="notes"><ul>
<li>We saw a similar image before</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
## Reset in detail

The following steps are executed when resetting:

```raw
1. Move the branch HEAD points to (--soft)
2. Make the index look like HEAD (--mixed, default)
3. Make the working directory look like the index (--hard)
```

[Here's a less compact explanation!](https://git-scm.com/book/en/v2/Git-Tools-Reset-Demystified)

<aside class="notes"><ul>
<li>If reset is used with a path, the first step is skipped! Read the link for more information</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
## Let's see it in action!

Create a new branch
```shell
$ git checkout -b pe/reset pe/backups
Switched to a new branch 'pe/reset'
```

...and reset to where your "backup history" starts
```shell
$ git reset pe/rebasing
Unstaged changes after reset:
M	README.md
```

<aside class="notes"><ul>
<li>The <code>README</code> is now modified?</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
## What's the status now?

```shell
$ git status
On branch pe/reset
Changes not staged for commit:
  (use "git add <file>..." to update what will be committed)
  (use "git restore <file>..." to discard changes in working directory)
	modified:   README.md

no changes added to commit (use "git add" and/or "git commit -a")
```
<!-- .element: style="font-size: 0.47em;" -->

...but we did not modify anything?
</script></section><section  data-markdown><script type="text/template">
## What's modified?

```shell
$ git diff
diff --git a/README.md b/README.md
index 93d56bd..58ad30b 100644
--- a/README.md
+++ b/README.md
@@ -4,3 +4,6 @@ Buy me a beer if it made you better.
 My list of [favorite beers](beers.md).
 Whiskey is also a good reward.
 [These whiskeys](whiskeys.md) are great!
+I would also love some feedback.
+Personal feedback is the best.
+Helpful feedback is awarded with great coffee.
```

All the changes from the `backups` branch are now in the working directory!

<aside class="notes"><ul>
<li><code>git reset</code> will not change your working directory (unless you use the <code>--hard</code> option)</li>
<li>The <code>HEAD</code> (and index) now differs from the working directory</li>
<li>Therefore the <code>README</code> looks modified to Git</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
## So what happened? 

```shell
$ git add . && git commit -m "Commit the reset"
[master b4507c5] Commit the reset
 6 files changed, 7 insertions(+), 2 deletions(-)
 create mode 100644 logs/refs/heads/pe/reset
 create mode 100644 refs/heads/pe/reset
```

...this is not enough information!

<!-- .slide: data-background="./gitception.jpg" -->
</script></section><section  data-markdown><script type="text/template">
## Let's take a closer look!

```shell
$ git show --name-only
commit b4507c5fa2f19e752cf0c23574c776fc6bda8079
Author: Pablo Escodebar <escodebar@gmail.com>
Date:   Mon Mar 16 21:26:18 2020 +0100

    Commit the reset

HEAD
ORIG_HEAD
index
logs/HEAD
logs/refs/heads/pe/reset
refs/heads/pe/reset
```

<!-- .slide: data-background="./gitception-flipped.jpg" -->

<aside class="notes"><ul>
<li>The <code>HEAD</code> changed, since that&#39;s what <code>git reset</code> does</li>
<li>The <code>ORIG_HEAD</code> contains a reference to where the branch was pointing to before the reset</li>
<li>The index was changed to match the <code>HEAD</code></li>
<li>The logs contain information about the changes to <code>HEAD</code> and <code>pe/reset</code></li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
## Let's look even closer!

```shell
$ cat ORIG_HEAD
c50ee29d790b0722ea0f15fe452f1de84e567b73
```
This is the last commit in the `pe/backups` branch!

```shell
$ cat logs/refs/heads/pe/reset
0000000000000000000000000000000000000000 c50ee29d790b0722ea0f15fe452f1de84e567b73 Pablo Escodebar <escodebar@gmail.com> 1584390378 +0100	branch: Created from pe/backups
c50ee29d790b0722ea0f15fe452f1de84e567b73 2e0ed18b60e15d74239d1e32740e30b963e3aec3 Pablo Escodebar <escodebar@gmail.com> 1584390378 +0100	reset: moving to pe/rebasing
```
These where `pe/reset` pointed to

<!-- .slide: data-background="./gitception.jpg" -->

<aside class="notes"><ul>
<li>Please take also a look at <code>logs/HEAD</code>, it will contain similar information as <code>pe/reset</code></li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
## (

You can access this information using
```shell
$ git reflog pe/reset
2e0ed18 pe/reset@{0}: reset: moving to pe/rebasing
c50ee29 pe/reset@{1}: branch: Created from pe/backups
```
...parsing it for readability

## )

<aside class="notes"><ul>
<li>Who used <code>git reflog</code> before?</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
## Create a new commit

...by commiting the change
```shell
$ git commit -am "Trade coffee for personal feedback"
[pe/reset 72024d0] Trade coffee for personal feedback
 1 file changed, 3 insertions(+)
```
with a more meaninful message.

<aside class="notes"><ul>
<li>You could also chose to &quot;git commit -C <existing_commit>&quot; to prevent rewriting the commit message</li>
<li>You can also make more than one commit</li>
<li>Use <code>git reflog</code>s information to restore the branch if you need to</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
## Commit the changes in the repository

```shell
$ git add . && git commit -m "Reset to improve the log"
[master 46598e3] Reset to improve the log
 6 files changed, 4 insertions(+), 2 deletions(-)
 create mode 100644 objects/72/024d010626ad0171c5133c6bcb3d1c0e73fb65
```
<!-- .element: style="font-size: 0.51em" -->

<!-- .slide: data-background="./gitception-flipped.jpg" -->
</script></section><section  data-markdown><script type="text/template">
## Exercises

* Reflog `HEAD` and a branch
* Reset to a previous commit in the current branch using
  - `--soft`
  - `--hard`
* Reset to a different branch using `--soft`
* Reset to a branch using the `-p` flag
* Reset a file in the index
* Reset a file in the index using the `-p` flag
</script></section><section  data-markdown><script type="text/template">
# Discussion
</script></section><section  data-markdown><script type="text/template">
## Checkout in detail

The following steps are executed when checking out:

```raw
1. Try a trivial merge with chosen commit
2. Move the HEAD
3. Make the working directory look like the HEAD
```

But used with a path the following happens:
```raw
1. Make the index look like chosen commit
2. Make the working directory look like the index
```

<aside class="notes"><ul>
<li><code>git checkout</code> is criticized to be overloaded with functionality</li>
<li>Depending on the options it will behave in a different way, making it hard to understand</li>
<li>Yet it is a very handy tool!</li>
<li>If checkout is used with a path is not working directory safe!</li>
<li>This means, that you can use <code>git checkout -p</code> to selectively discard edits from your current working tree</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
## Using the checkout command

...to clean up the backup history

```shell
$ git checkout -b pe/checkingout pe/rebasing
Switched to a new branch 'pe/checkingout'
```

<aside class="notes"><p>This is similar to what we did with <code>git reset</code>:
We go to the point from where we want to rewrite the history</p>
</aside></script></section><section  data-markdown><script type="text/template">
## Checkout the changes

...which you want to commit
```shell
$ git checkout -p pe/backups
diff --git b/README.md a/README.md
index 93d56bd..58ad30b 100644
--- b/README.md
+++ a/README.md
@@ -4,3 +4,6 @@ Buy me a beer if it made you better.
 My list of [favorite beers](beers.md).
 Whiskey is also a good reward.
 [These whiskeys](whiskeys.md) are great!
+I would also love some feedback.
+Personal feedback is the best.
+Helpful feedback is awarded with great coffee.
(1/1) Apply this hunk to index and worktree [y,n,q,a,d,e,?]?
```

<aside class="notes"><ul>
<li>The difference to <code>git reset</code> is that we created a new branch, leaving the previous instact</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
## What did the checkout do?

```shell
$ git status
On branch pe/checkingout
Changes to be committed:
  (use "git restore --staged <file>..." to unstage)
	modified:   README.md
```

...it put the files in the index!

<aside class="notes"><ul>
<li>Checkout (in patch mode) makes the index (and the working directory) look like the checked out change</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
## Create the new commit

```shell
$ git commit -m "Trade coffee for personal feedback"
[pe/checkingout 72024d0] Trade coffee for personal feedback
 1 file changed, 3 insertions(+)
```

<aside class="notes"><ul>
<li>You can checkout changes from several branches, joining changes into a single branch</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
## Start enjoying digging!

```shell
$ git add . && git commit -m "Checkout to improve the log"
[master 1c22cf8] Checkout to improve the log
 5 files changed, 6 insertions(+), 1 deletion(-)
 create mode 100644 logs/refs/heads/pe/checkingout
 create mode 100644 refs/heads/pe/checkingout
```
<!-- .element: style="font-size: 0.51em" -->

<!-- .slide: data-background="./gitception.jpg" -->

<aside class="notes"><ul>
<li>All in all, this is pretty similar to using the reset command to clean up the history</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
## Exercises

* Checkout a branch or commit the using `-p` flag
* Checkout the current `HEAD`
  - using the `-p` flag
  - when a change is in the index
* Checkout a modified file
* Checkout a modified file using the `-p` flag
* Checkout a file from an other branch
* Checkout a file from an other branch using `-p`
</script></section><section  data-markdown><script type="text/template">
# Discussion
</script></section><section  data-markdown><script type="text/template">
## The change stash 

...can also be used for changes which
* are "work in progress"
* do not belong to the current branch
* do not require a commit but need to be kept
</script></section><section  data-markdown><script type="text/template">
## Let's see what stash does

Create a new branch
```shell
$ git checkout -b pe/stashing pe/rebasing
Switched to a new branch 'pe/stashing'
```
...as we did in the other steps
</script></section><section  data-markdown><script type="text/template">
## Add changes not worth committing

```shell
$ echo "[Beerpay](TODO: activate beerpay) is cool!" >> README.md
```

Let's have some fun staging part of it
```shell
$ git add README.md

```

...and keeping another part in the working directory
```shell
$ echo "I also love mechanical keyboards" >> README.md
```
</script></section><section  data-markdown><script type="text/template">
## Put in the stash

...what prevents you from continue working
```shell
$ git stash push -m "WIP beerpay"
Saved working directory and index state On stashing: WIP beerpay
```

and the working directory is clean again!
```shell
$ git status
On branch pe/stashing
nothing to commit, working tree clean
```

<aside class="notes"><p>Changes in the index which differ from the working directory will not be taken into account.</p>
</aside></script></section><section  data-markdown><script type="text/template">
## No muscle soreness yet

...so let's check what happened in the repository:
```shell
$ git add . && git commit -m "Commit the stashed changes"
[master b3d7727] Commit the stashed changes
 14 files changed, 11 insertions(+), 2 deletions(-)
 create mode 100644 logs/refs/heads/pe/stashing
 create mode 100644 logs/refs/stash
 create mode 100644 objects/1c/504d7a74b02c5cb2acba2c6c121dacc5930a17
 create mode 100644 objects/32/e961b3293f7a2690fed0d9507475f544790f24
 create mode 100644 objects/59/530508363fe3f9101f68e1a50eff14ac1c8b2d
 create mode 100644 objects/a4/ac931e9ee88677b00fda33dd3ddd4d704357f6
 create mode 100644 objects/be/da045e9cdb824a63f9c41adf38b4d43c9ff010
 create mode 100644 objects/ff/63e28a60a4f7ef54475876b649343e861db0f9
 create mode 100644 refs/heads/pe/stashing
 create mode 100644 refs/stash
```
<!-- .element: style="font-size: 0.51em" -->

6 new objects?! But we only changed one file!

<!-- .slide: data-background="./gitception-flipped.jpg" -->

<aside class="notes"><p>Feel free to use <code>git cat-file</code> to see the contents of these objects.
There is a:</p>
<ul>
<li>Commit, tree and blob for the state of the index</li>
<li>Commit, tree and blob for the state of the working directory</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
## Getting stashed changes back

...as soon as you need them
```shell
$ git stash list
stash@{0}: On stashing: WIP beerpay
```

```shell
$ git stash pop
On branch pe/stashing
Changes not staged for commit:
  (use "git add <file>..." to update what will be committed)
  (use "git restore <file>..." to discard changes in working directory)
	modified:   README.md

no changes added to commit (use "git add" and/or "git commit -a")
Dropped refs/stash@{0} (1c504d7a74b02c5cb2acba2c6c121dacc5930a17)
```
<!-- .element: style="font-size: 0.49em" -->

<aside class="notes"><ul>
<li>If you want to keep the change in the stash for later use, you can use &quot;apply&quot; instead of &quot;pop&quot;</li>
<li>Take a closer look at the output, part of it is equivalent to <code>git status</code></li>
<li>The index changed, it does not contain the changes added before</li>
<li>Git will try to reconstruct the index when using &quot;git stash pop&quot; and &quot;git stash apply&quot;</li>
<li>But under certain circumstances, Git will not set the index</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
## No blisters either

...so check the repository again!
```shell
$ git add . && git commit -m "Commit the stash pop"
[master 4f5f53a] Commit the stash pop
 3 files changed, 2 deletions(-)
 delete mode 100644 logs/refs/stash
 delete mode 100644 refs/stash
```

<!-- .slide: data-background="./gitception.jpg" -->
</script></section><section  data-markdown><script type="text/template">
## Exercises

* Stash changes in your working directory
* Use stash along with the `-p` flag
* Use stash with a modified index
* Apply stashed changes to your working directory
* Take a look at stashed changes
* Run `git log --all --graph --oneline --reflog`
</script></section><section  data-markdown><script type="text/template">
# Discussion

* Splitting commits
* Combining rebase, reset, checkout and stash
* Keeping the holistic picture
</script></section><section  data-markdown><script type="text/template">
## I didn't find a decent comic for discussing distributed Git

## so you only get this lowsy slide

<aside class="notes"><ul>
<li>100 internet points for the one who suggests a good comic for distributed repositories!</li>
<li>1000 internet points for the one who makes a good comic for distributed repositories!</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
![Local VCS](VCS/local_vcs.png)<!-- .element: height="400px" -->

<aside class="notes"><ul>
<li>This is a &quot;Local Version Control System&quot;</li>
<li>Versions are associated to points in time</li>
<li>Versions are usually not labeled / tagged</li>
<li>Descriptions for the versions are usually not made</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
Let's add some...

*collaboration*
<!-- .element: class="fragment" -->

<aside class="notes"><ul>
<li>In within a company, it is pretty common to share files</li>
<li>These shared files are not managed by every user individually</li>
<li>Imagine the chaos (or waste of disk space) if everyone had to manage the backups individually</li>
<li>Therefore it makes sense to setup a central file-share and make up backups of these files</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
![Centralized VCS](VCS/centralized_vcs.png)<!-- .element: height="400px" -->

<aside class="notes"><ul>
<li>This is called &quot;Centralized Version Control System&quot;</li>
<li>You know this from file shares like backed up NFS or Dropbox</li>
<li>An advantage of this is that it is pretty easy to setup</li>
<li>And if you are thinking of it: No. This is not like Google Docs or Office 365, since they allow you to edit files at the same time (which is crazy!)</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
## Drawbacks of *centralized* vcs

* Connection to central server is required
* Remote commits are slow
* Worflows can be very complicated
* A central server introduces a single point of failure

<aside class="notes"><ul>
<li>This is a good solution if the documents are not edited frequently</li>
<li>It is also helpful if files are not edited by people at the same time</li>
</ul>
<p>Questions:</p>
<ul>
<li>Two people want to work on the same file? (ask Google about it)</li>
<li>The server goes down for maintenance?</li>
<li>The internet connection is down for maintenance?</li>
<li>What do we do with software developers?</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
What if version control was...

*distributed?*<!-- .element: class="fragment" -->

<aside class="notes"><ul>
<li>I said before: Imagine the chaos (and waste of disk space) if everyone had to manage the backups individually</li>
<li>When working in software development (or working with plain text files), development teams often work on the same files at the same time</li>
<li>Unless very complicated workflows are introduced, chaos is inevitable</li>
<li>But chaos can be minimised if propper tooling is used conveniently</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
![Decentralized VCS](VCS/decentralized_vcs.png)<!-- .element: height="400px" -->

<aside class="notes"><ul>
<li>This is what a distributed version control system looks like</li>
<li>You use this every day without being aware of: Git</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
Development becomes *complex!*

<aside class="notes"><ul>
<li>Propper tooling is required to handle emerging situations</li>
<li>Managing such a system requires great understanding of this tools (or introducing complicated workflows)</li>
<li>But since workflows usually constraint the users development, it is usually better to learn the tools propperly</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
## Advantages of *distributed* VCS 

* Committing changesets can be done locally
* Committing changesets is extremely fast
* One can share the changes with others without having to publish them

...also: A centralized solution is not less complex.<!-- .element: class="fragment" -->

<aside class="notes"><ul>
<li>There are barely disadvantages (disk space is not an issue, since we&#39;re dealing with small files!)</li>
<li>A distributed VCS can still be used like a central VCS (and in most cases it is!)</li>
<li>Who already had a shared Git repository in a Dropbox folder?</li>
</ul>
<p>How do we reduce complexity?</p>
<p>Think of patches!</p>
</aside></script></section><section  data-markdown><script type="text/template">
Complexity is reduced if patches are well...
* self contained
* documented
* tested
* small

<aside class="notes"><ul>
<li>Patches should be self contained, to avoid questions and forgetting things which belong together</li>
<li>Patches should be as small as possible, it is easier to patch twice than to split a patch</li>
<li>Every patch should be documented and signed</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
Other conveniences of using patches:
* simpler error analysis
* simpler code review
* better code reusability
* faster development

<aside class="notes"><ul>
<li>Tools exist to find out which patch introduced errors, it is much much easier to find an error in within a few lines of code than in within hundreds of lines of code</li>
<li>Correctly signed patches allow to ask the author in case of uncertainty</li>
<li>Patches can be applied to several systems if the same or a similar logic is required</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
## Adding a remote

...is simple as running
```shell
$ git remote add gitception .git/

```

<aside class="notes"><ul>
<li>Replace the folder path with an URL or a Git handle</li>
<li>The default remote is called <code>origin</code></li>
<li>There are several subcommands which allow you to manage remotes</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
## Starting to feel like home

Let's see how Git deals with remotes:
```shell
$ git add . && git diff --cached
diff --git a/config b/config
index 515f483..6bc950f 100644
--- a/config
+++ b/config
@@ -3,3 +3,6 @@
 	filemode = true
 	bare = false
 	logallrefupdates = true
+[remote "gitception"]
+	url = .git/
+	fetch = +refs/heads/*:refs/remotes/gitception/*
```

Aha! They're stored in the repository's configuration!

<!-- .slide: data-background="./gitception-flipped.jpg" -->

<aside class="notes"></aside></script></section><section  data-markdown><script type="text/template">
## Commit the changes

```shell
$ git commit -m "Add Gitception as remote"
[master ff3f067] Add Gitception as remote
 1 file changed, 3 insertions(+)
```

<!-- .slide: data-background="./gitception.jpg" -->
</script></section><section  data-markdown><script type="text/template">
## Sync the repositories

...using

```shell
$ git fetch gitception
warning: no common commits
From .git
 * [new branch]      master     -> gitception/master
```

This will download all branches and their associated objects!

<aside class="notes"><ul>
<li>This is similar to <code>git pull</code>, there is an excersise to determine the differences!</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
## We could start building a bunker!

```shell
$ git add . && git commit -m "Fetch the gitception remote"
[master e448772] Fetch the gitception remote
 5 files changed, 3 insertions(+)
 create mode 100644 FETCH_HEAD
 create mode 100644 logs/refs/remotes/gitception/master
 create mode 100644 objects/pack/pack-20b5e8d45046975173e061c8b511ad6de7bdade8.idx
 create mode 100644 objects/pack/pack-20b5e8d45046975173e061c8b511ad6de7bdade8.pack
 create mode 100644 refs/remotes/gitception/master
```
<!-- .element: style="font-size: 0.42em" -->

What the $%#@! What are pack files?

<!-- .slide: data-background="./gitception-flipped.jpg" -->

<aside class="notes"><ul>
<li>I actually can&#39;t tell you much about packfiles!</li>
<li>You can read about pack-files here: <a href="https://git-scm.com/book/en/v2/Git-Internals-Packfiles">https://git-scm.com/book/en/v2/Git-Internals-Packfiles</a></li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
!["Is this the real world?"](https://cdn.prod.www.spiegel.de/images/de945cc8-0001-0004-0000-000000115065_w920_r1.5005359056806002_fpx33.29_fpy49.95.jpg)<!-- .element: height="550px" -->

<aside class="notes"><ul>
<li>Ok, ok, ok... so now we have in our Git repository within our Git repository, our Git repository as commits of commits of commits in pack files!</li>
<li>I think that&#39;s deep enough for today!</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
## Let's add a public repository

...to make our work accessible to others
```shell
$ git remote add github git@github.com:escodebar/trainings.git

```

<aside class="notes"><ul>
<li>This is where you will find:<ul>
<li>the commits and branches made so far</li>
<li>the Gitception repository</li>
</ul>
</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
## Pushing all branches

...and changing their name on the remote
```shell
$ git push -u github "refs/heads/*:refs/heads/git/mf/repo/*"
Branch 'master' set up to track remote branch 'git/mf/repo/master' from 'github'.
Branch 'pe/add_list_of_favorite_beers' set up to track remote branch 'git/mf/repo/pe/add_list_of_favorite_beers' from 'github'.
Branch 'pe/backups' set up to track remote branch 'git/mf/repo/pe/backups' from 'github'.
Branch 'pe/checkingout' set up to track remote branch 'git/mf/repo/pe/checkingout' from 'github'.
Branch 'pe/cherry_picking' set up to track remote branch 'git/mf/repo/pe/cherry_picking' from 'github'.
Branch 'pe/interactive_rebase' set up to track remote branch 'git/mf/repo/pe/interactive_rebase' from 'github'.
Branch 'pe/merging' set up to track remote branch 'git/mf/repo/pe/merging' from 'github'.
Branch 'pe/new_branch' set up to track remote branch 'git/mf/repo/pe/new_branch' from 'github'.
Branch 'pe/rebasing' set up to track remote branch 'git/mf/repo/pe/rebasing' from 'github'.
Branch 'pe/reset' set up to track remote branch 'git/mf/repo/pe/reset' from 'github'.
Branch 'pe/stashing' set up to track remote branch 'git/mf/repo/pe/stashing' from 'github'.
Branch 'pe/whiskey_is_also_an_option' set up to track remote branch 'git/mf/repo/pe/whiskey_is_also_an_option' from 'github'.
```

<aside class="notes"><ul>
<li>This was a lot of information at once!</li>
<li>You can also just push single branches... but I am sure you will understand this command if you made it this far!</li>
<li>When pushing a branch, you are pushing all associated objects</li>
<li>You can also push all branches and associated objects with <code>--all</code></li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
## Remote branches in our repository?

...how does that work?
```shell
$ git add . && git commit -m "Push the branch"
[master 5d7afc3] Push the branch
 25 files changed, 63 insertions(+)
 create mode 100644 logs/refs/remotes/github/git/mf/repo/master
 create mode 100644 logs/refs/remotes/github/git/mf/repo/pe/add_list_of_favorite_beers
 create mode 100644 logs/refs/remotes/github/git/mf/repo/pe/backups
 create mode 100644 logs/refs/remotes/github/git/mf/repo/pe/checkingout
 create mode 100644 logs/refs/remotes/github/git/mf/repo/pe/cherry_picking
 create mode 100644 logs/refs/remotes/github/git/mf/repo/pe/interactive_rebase
 create mode 100644 logs/refs/remotes/github/git/mf/repo/pe/merging
 create mode 100644 logs/refs/remotes/github/git/mf/repo/pe/new_branch
 create mode 100644 logs/refs/remotes/github/git/mf/repo/pe/rebasing
 create mode 100644 logs/refs/remotes/github/git/mf/repo/pe/reset
 create mode 100644 logs/refs/remotes/github/git/mf/repo/pe/stashing
 create mode 100644 logs/refs/remotes/github/git/mf/repo/pe/whiskey_is_also_an_option
 create mode 100644 refs/remotes/github/git/mf/repo/master
 create mode 100644 refs/remotes/github/git/mf/repo/pe/add_list_of_favorite_beers
 create mode 100644 refs/remotes/github/git/mf/repo/pe/backups
 create mode 100644 refs/remotes/github/git/mf/repo/pe/checkingout
 create mode 100644 refs/remotes/github/git/mf/repo/pe/cherry_picking
 create mode 100644 refs/remotes/github/git/mf/repo/pe/interactive_rebase
 create mode 100644 refs/remotes/github/git/mf/repo/pe/merging
 create mode 100644 refs/remotes/github/git/mf/repo/pe/new_branch
 create mode 100644 refs/remotes/github/git/mf/repo/pe/rebasing
 create mode 100644 refs/remotes/github/git/mf/repo/pe/reset
 create mode 100644 refs/remotes/github/git/mf/repo/pe/stashing
 create mode 100644 refs/remotes/github/git/mf/repo/pe/whiskey_is_also_an_option
```
<!-- .element: style="font-size: 0.40em" -->

<!-- .slide: data-background="./gitception.jpg" -->
</script></section><section  data-markdown><script type="text/template">
## But how...

...does it know which branches belong together?
```shell
$ git show
commit 5d7afc3f844df7afd58bf632714f2ffc50f6cf99
Author: Pablo Escodebar <escodebar@gmail.com>
Date:   Mon Mar 16 21:26:28 2020 +0100

    Push the branch

diff --git a/config b/config
index 6bc950f..2014892 100644
--- a/config
+++ b/config
@@ -6,3 +6,42 @@
 [remote "gitception"]
 	url = .git/
 	fetch = +refs/heads/*:refs/remotes/gitception/*
+[remote "github"]
+	url = git@github.com:escodebar/trainings.git
+	fetch = +refs/heads/*:refs/remotes/github/*
+[branch "master"]
+	remote = github
+	merge = refs/heads/git/mf/repo/master
+[branch "pe/add_list_of_favorite_beers"]
+	remote = github
+	merge = refs/heads/git/mf/repo/pe/add_list_of_favorite_beers
+[branch "pe/backups"]
+	remote = github
+	merge = refs/heads/git/mf/repo/pe/backups
+[branch "pe/checkingout"]
+	remote = github
+	merge = refs/heads/git/mf/repo/pe/checkingout
+[branch "pe/cherry_picking"]
+	remote = github
+	merge = refs/heads/git/mf/repo/pe/cherry_picking
+[branch "pe/interactive_rebase"]
+	remote = github
+	merge = refs/heads/git/mf/repo/pe/interactive_rebase
+[branch "pe/merging"]
+	remote = github
+	merge = refs/heads/git/mf/repo/pe/merging
+[branch "pe/new_branch"]
+	remote = github
+	merge = refs/heads/git/mf/repo/pe/new_branch
+[branch "pe/rebasing"]
+	remote = github
+	merge = refs/heads/git/mf/repo/pe/rebasing
+[branch "pe/reset"]
+	remote = github
+	merge = refs/heads/git/mf/repo/pe/reset
+[branch "pe/stashing"]
+	remote = github
+	merge = refs/heads/git/mf/repo/pe/stashing
+[branch "pe/whiskey_is_also_an_option"]
+	remote = github
+	merge = refs/heads/git/mf/repo/pe/whiskey_is_also_an_option
diff --git a/logs/refs/remotes/github/git/mf/repo/master b/logs/refs/remotes/github/git/mf/repo/master
new file mode 100644
index 0000000..f093a94
--- /dev/null
+++ b/logs/refs/remotes/github/git/mf/repo/master
@@ -0,0 +1 @@
+0000000000000000000000000000000000000000 b214f3eb6447de6481adbb383026f583eae59be6 Pablo Escodebar <escodebar@gmail.com> 1584390388 +0100	update by push
diff --git a/logs/refs/remotes/github/git/mf/repo/pe/add_list_of_favorite_beers b/logs/refs/remotes/github/git/mf/repo/pe/add_list_of_favorite_beers
new file mode 100644
index 0000000..127f966
--- /dev/null
+++ b/logs/refs/remotes/github/git/mf/repo/pe/add_list_of_favorite_beers
@@ -0,0 +1 @@
+0000000000000000000000000000000000000000 cceb198cbd3acfef47a664a5e730f13a20af2650 Pablo Escodebar <escodebar@gmail.com> 1584390388 +0100	update by push
diff --git a/logs/refs/remotes/github/git/mf/repo/pe/backups b/logs/refs/remotes/github/git/mf/repo/pe/backups
new file mode 100644
index 0000000..7887cc2
--- /dev/null
+++ b/logs/refs/remotes/github/git/mf/repo/pe/backups
@@ -0,0 +1 @@
+0000000000000000000000000000000000000000 c50ee29d790b0722ea0f15fe452f1de84e567b73 Pablo Escodebar <escodebar@gmail.com> 1584390388 +0100	update by push
diff --git a/logs/refs/remotes/github/git/mf/repo/pe/checkingout b/logs/refs/remotes/github/git/mf/repo/pe/checkingout
new file mode 100644
index 0000000..f41aa44
--- /dev/null
+++ b/logs/refs/remotes/github/git/mf/repo/pe/checkingout
@@ -0,0 +1 @@
+0000000000000000000000000000000000000000 72024d010626ad0171c5133c6bcb3d1c0e73fb65 Pablo Escodebar <escodebar@gmail.com> 1584390388 +0100	update by push
diff --git a/logs/refs/remotes/github/git/mf/repo/pe/cherry_picking b/logs/refs/remotes/github/git/mf/repo/pe/cherry_picking
new file mode 100644
index 0000000..ea419e3
--- /dev/null
+++ b/logs/refs/remotes/github/git/mf/repo/pe/cherry_picking
@@ -0,0 +1 @@
+0000000000000000000000000000000000000000 2e0ed18b60e15d74239d1e32740e30b963e3aec3 Pablo Escodebar <escodebar@gmail.com> 1584390388 +0100	update by push
diff --git a/logs/refs/remotes/github/git/mf/repo/pe/interactive_rebase b/logs/refs/remotes/github/git/mf/repo/pe/interactive_rebase
new file mode 100644
index 0000000..7887cc2
--- /dev/null
+++ b/logs/refs/remotes/github/git/mf/repo/pe/interactive_rebase
@@ -0,0 +1 @@
+0000000000000000000000000000000000000000 c50ee29d790b0722ea0f15fe452f1de84e567b73 Pablo Escodebar <escodebar@gmail.com> 1584390388 +0100	update by push
diff --git a/logs/refs/remotes/github/git/mf/repo/pe/merging b/logs/refs/remotes/github/git/mf/repo/pe/merging
new file mode 100644
index 0000000..ec8cb97
--- /dev/null
+++ b/logs/refs/remotes/github/git/mf/repo/pe/merging
@@ -0,0 +1 @@
+0000000000000000000000000000000000000000 e75139dd47742220cb4f2d0d0ec8fb439c2dad60 Pablo Escodebar <escodebar@gmail.com> 1584390388 +0100	update by push
diff --git a/logs/refs/remotes/github/git/mf/repo/pe/new_branch b/logs/refs/remotes/github/git/mf/repo/pe/new_branch
new file mode 100644
index 0000000..f093a94
--- /dev/null
+++ b/logs/refs/remotes/github/git/mf/repo/pe/new_branch
@@ -0,0 +1 @@
+0000000000000000000000000000000000000000 b214f3eb6447de6481adbb383026f583eae59be6 Pablo Escodebar <escodebar@gmail.com> 1584390388 +0100	update by push
diff --git a/logs/refs/remotes/github/git/mf/repo/pe/rebasing b/logs/refs/remotes/github/git/mf/repo/pe/rebasing
new file mode 100644
index 0000000..ea419e3
--- /dev/null
+++ b/logs/refs/remotes/github/git/mf/repo/pe/rebasing
@@ -0,0 +1 @@
+0000000000000000000000000000000000000000 2e0ed18b60e15d74239d1e32740e30b963e3aec3 Pablo Escodebar <escodebar@gmail.com> 1584390388 +0100	update by push
diff --git a/logs/refs/remotes/github/git/mf/repo/pe/reset b/logs/refs/remotes/github/git/mf/repo/pe/reset
new file mode 100644
index 0000000..f41aa44
--- /dev/null
+++ b/logs/refs/remotes/github/git/mf/repo/pe/reset
@@ -0,0 +1 @@
+0000000000000000000000000000000000000000 72024d010626ad0171c5133c6bcb3d1c0e73fb65 Pablo Escodebar <escodebar@gmail.com> 1584390388 +0100	update by push
diff --git a/logs/refs/remotes/github/git/mf/repo/pe/stashing b/logs/refs/remotes/github/git/mf/repo/pe/stashing
new file mode 100644
index 0000000..ea419e3
--- /dev/null
+++ b/logs/refs/remotes/github/git/mf/repo/pe/stashing
@@ -0,0 +1 @@
+0000000000000000000000000000000000000000 2e0ed18b60e15d74239d1e32740e30b963e3aec3 Pablo Escodebar <escodebar@gmail.com> 1584390388 +0100	update by push
diff --git a/logs/refs/remotes/github/git/mf/repo/pe/whiskey_is_also_an_option b/logs/refs/remotes/github/git/mf/repo/pe/whiskey_is_also_an_option
new file mode 100644
index 0000000..59b7ae5
--- /dev/null
+++ b/logs/refs/remotes/github/git/mf/repo/pe/whiskey_is_also_an_option
@@ -0,0 +1 @@
+0000000000000000000000000000000000000000 5831d48f2c84c3a5272250d5d6df1a73235ec52d Pablo Escodebar <escodebar@gmail.com> 1584390388 +0100	update by push
diff --git a/refs/remotes/github/git/mf/repo/master b/refs/remotes/github/git/mf/repo/master
new file mode 100644
index 0000000..5a6c8b9
--- /dev/null
+++ b/refs/remotes/github/git/mf/repo/master
@@ -0,0 +1 @@
+b214f3eb6447de6481adbb383026f583eae59be6
diff --git a/refs/remotes/github/git/mf/repo/pe/add_list_of_favorite_beers b/refs/remotes/github/git/mf/repo/pe/add_list_of_favorite_beers
new file mode 100644
index 0000000..021ae58
--- /dev/null
+++ b/refs/remotes/github/git/mf/repo/pe/add_list_of_favorite_beers
@@ -0,0 +1 @@
+cceb198cbd3acfef47a664a5e730f13a20af2650
diff --git a/refs/remotes/github/git/mf/repo/pe/backups b/refs/remotes/github/git/mf/repo/pe/backups
new file mode 100644
index 0000000..154c1e0
--- /dev/null
+++ b/refs/remotes/github/git/mf/repo/pe/backups
@@ -0,0 +1 @@
+c50ee29d790b0722ea0f15fe452f1de84e567b73
diff --git a/refs/remotes/github/git/mf/repo/pe/checkingout b/refs/remotes/github/git/mf/repo/pe/checkingout
new file mode 100644
index 0000000..2932845
--- /dev/null
+++ b/refs/remotes/github/git/mf/repo/pe/checkingout
@@ -0,0 +1 @@
+72024d010626ad0171c5133c6bcb3d1c0e73fb65
diff --git a/refs/remotes/github/git/mf/repo/pe/cherry_picking b/refs/remotes/github/git/mf/repo/pe/cherry_picking
new file mode 100644
index 0000000..b26b6d0
--- /dev/null
+++ b/refs/remotes/github/git/mf/repo/pe/cherry_picking
@@ -0,0 +1 @@
+2e0ed18b60e15d74239d1e32740e30b963e3aec3
diff --git a/refs/remotes/github/git/mf/repo/pe/interactive_rebase b/refs/remotes/github/git/mf/repo/pe/interactive_rebase
new file mode 100644
index 0000000..154c1e0
--- /dev/null
+++ b/refs/remotes/github/git/mf/repo/pe/interactive_rebase
@@ -0,0 +1 @@
+c50ee29d790b0722ea0f15fe452f1de84e567b73
diff --git a/refs/remotes/github/git/mf/repo/pe/merging b/refs/remotes/github/git/mf/repo/pe/merging
new file mode 100644
index 0000000..8a8cd9b
--- /dev/null
+++ b/refs/remotes/github/git/mf/repo/pe/merging
@@ -0,0 +1 @@
+e75139dd47742220cb4f2d0d0ec8fb439c2dad60
diff --git a/refs/remotes/github/git/mf/repo/pe/new_branch b/refs/remotes/github/git/mf/repo/pe/new_branch
new file mode 100644
index 0000000..5a6c8b9
--- /dev/null
+++ b/refs/remotes/github/git/mf/repo/pe/new_branch
@@ -0,0 +1 @@
+b214f3eb6447de6481adbb383026f583eae59be6
diff --git a/refs/remotes/github/git/mf/repo/pe/rebasing b/refs/remotes/github/git/mf/repo/pe/rebasing
new file mode 100644
index 0000000..b26b6d0
--- /dev/null
+++ b/refs/remotes/github/git/mf/repo/pe/rebasing
@@ -0,0 +1 @@
+2e0ed18b60e15d74239d1e32740e30b963e3aec3
diff --git a/refs/remotes/github/git/mf/repo/pe/reset b/refs/remotes/github/git/mf/repo/pe/reset
new file mode 100644
index 0000000..2932845
--- /dev/null
+++ b/refs/remotes/github/git/mf/repo/pe/reset
@@ -0,0 +1 @@
+72024d010626ad0171c5133c6bcb3d1c0e73fb65
diff --git a/refs/remotes/github/git/mf/repo/pe/stashing b/refs/remotes/github/git/mf/repo/pe/stashing
new file mode 100644
index 0000000..b26b6d0
--- /dev/null
+++ b/refs/remotes/github/git/mf/repo/pe/stashing
@@ -0,0 +1 @@
+2e0ed18b60e15d74239d1e32740e30b963e3aec3
diff --git a/refs/remotes/github/git/mf/repo/pe/whiskey_is_also_an_option b/refs/remotes/github/git/mf/repo/pe/whiskey_is_also_an_option
new file mode 100644
index 0000000..6abbaff
--- /dev/null
+++ b/refs/remotes/github/git/mf/repo/pe/whiskey_is_also_an_option
@@ -0,0 +1 @@
+5831d48f2c84c3a5272250d5d6df1a73235ec52d
```

<!-- .slide: data-background="./gitception-flipped.jpg" -->

<aside class="notes"><ul>
<li>Git keeps track of the associated branches in the repository&#39;s configuration!</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
## Let's also push the gitception branch

...for the sake of completeness

```shell
$ git fetch && git push -u github refs/remotes/gitception/master:refs/heads/git/mf/gitception
remote: 
remote: Create a pull request for 'git/mf/gitception' on GitHub by visiting:        
remote:      https://github.com/escodebar/trainings/pull/new/git/mf/gitception        
remote: 
To github.com:escodebar/trainings.git
 * [new branch]      gitception/master -> git/mf/gitception
```
<!-- .element: style="font-size: 0.38em" -->

Now you know where to get the repositories for later analysis!

<aside class="notes"><ul>
<li>This allows you to push branches between remotes</li>
<li>This workshop is self-contained!</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
## Excercises

* Run the commands in the previous slides
* Checkout a remote branch
* Create a new branch based on a remote branch
* Think about it: Do you need a local master branch?
* Add a second remote and push a branch to it
* Explain how `git pull` is different from `git fetch`
* Push a local commit to a remote branch
* Read about `git push --mirror`
</script></section><section  data-markdown><script type="text/template">
# Discussion
</script></section><section  data-markdown><script type="text/template">
![Workflows](https://imgs.xkcd.com/comics/90s_flowchart.png)<!-- .element: height="550px" -->

<aside class="notes"><ul>
<li>There are a lot of different workflows</li>
<li>The workflow is a tool which has to be chosen according to the task and the people working on the task</li>
<li>You do not necessarily have to use the same workflow all the time (think about Cynefin!)</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
## Centralized Workflow

![Centralized Workflow](https://git-scm.com/book/en/v2/images/centralized_workflow.png)

<aside class="notes"><ul>
<li>This is probably the simplest possible workflow</li>
<li>This workflow is very common</li>
<li>The complexity is handled in code and the deployment tools</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
## Integration-Manager Workflow

![Integration-Manager Workflow](https://git-scm.com/book/en/v2/images/integration-manager.png)

<aside class="notes"><ul>
<li>I like this workflow a lot</li>
<li>Depending on the Integration-Manager, the developers are not forced to write nice patches</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
## Dictator and Lieutenants Workflow

![Dictator and Lieutenants Workflow](https://git-scm.com/book/en/v2/images/benevolent-dictator.png)<!-- .element: height="440px" -->

<aside class="notes"><ul>
<li>The Linux kernel developer community uses this workflow</li>
<li>It is similar to the Integration-Manager workflow but with an additional layer</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
## GitHub Flow

The [GitHub Flow](https://guides.github.com/introduction/flow/) is a simple yet elegant workflow!

<aside class="notes"><ul>
<li>It includes:<ul>
<li>Code review</li>
<li>Discussions</li>
<li>Deployment</li>
<li>Testing</li>
</ul>
</li>
<li>It is <em>pretty</em> lean!</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
![Technical Debt](https://i.pinimg.com/originals/07/07/f3/0707f39f910cbf3560b423910ec23e5a.gif)
</script></section><section  data-markdown><script type="text/template">
## Gitflow Workflow

And then there is the [Gitflow Workflow](https://www.atlassian.com/git/tutorials/comparing-workflows/gitflow-workflow)!

<aside class="notes"><ul>
<li>To me, this workflow handles way too much complexity</li>
<li>All developers need to have a good Git knowledge and a holistic picture</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
## Exercices

* Discuss in a group your current workflows
* Think of possible scenarios where these workflows may be useful
* Discuss where and who manages project complexity with these workflows
</script></section><section  data-markdown><script type="text/template">
# Discussion
</script></section><section  data-markdown><script type="text/template">
## Extra task

Share a public repository and implement FizzBuzz in TDD communicating only using Git commits.
Also think of a way to establish a common workflow using only Git commits!
</script></section><section  data-markdown><script type="text/template">
## Resources

* [10 things I hate about Git](https://stevebennett.me/2012/02/24/10-things-i-hate-about-git/)
* [Cynefin](https://cognitive-edge.com/videos/cynefin-framework-introduction/)
* [Git Magic](http://www-cs-students.stanford.edu/~blynn/gitmagic/ch08.html)
* [Git Reference](https://git-scm.com/docs/)
* [Git is simpler](http://nfarina.com/post/9868516270/git-is-simpler)
* [Oh shit Git!](https://ohshitgit.com/)
* [Pro Git](https://git-scm.com/book/en/v2)
* [The thing about Git](https://tomayko.com/blog/2008/the-thing-about-git)
* [Think like a Git](http://think-like-a-git.net/)
* [Why Git is Better than X](http://web.archive.org/web/20090210020404id_/http://whygitisbetterthanx.com/#the-staging-area)
</script></section><section  data-markdown><script type="text/template">
## Questions & Feedback
</script></section><section  data-markdown><script type="text/template">
## Thank you!

🍺🍻🍺</script></section></div>
    </div>

    <script src="./js/reveal.js"></script>

    <script>
      function extend() {
        var target = {};
        for (var i = 0; i < arguments.length; i++) {
          var source = arguments[i];
          for (var key in source) {
            if (source.hasOwnProperty(key)) {
              target[key] = source[key];
            }
          }
        }
        return target;
      }

      // Optional libraries used to extend on reveal.js
      var deps = [
        { src: './plugin/markdown/marked.js', condition: function() { return !!document.querySelector('[data-markdown]'); } },
        { src: './plugin/markdown/markdown.js', condition: function() { return !!document.querySelector('[data-markdown]'); } },
        { src: './plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
        { src: './plugin/zoom-js/zoom.js', async: true },
        { src: './plugin/notes/notes.js', async: true },
        { src: './plugin/math/math.js', async: true }
      ];

      // default options to init reveal.js
      var defaultOptions = {
        controls: true,
        progress: true,
        history: true,
        center: true,
        transition: 'default', // none/fade/slide/convex/concave/zoom
        dependencies: deps
      };

      // options from URL query string
      var queryOptions = Reveal.getQueryHash() || {};

      var options = extend(defaultOptions, {"transition":"fade"}, queryOptions);
    </script>


    <script>
      Reveal.initialize(options);
    </script>
  </body>
</html>
